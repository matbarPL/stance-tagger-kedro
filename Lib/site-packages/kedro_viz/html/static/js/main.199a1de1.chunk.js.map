{"version":3,"sources":["components/easter-egg/brodyquest.mp3","components/easter-egg/easter-egg.png","actions/nodes.js","reducers/nodes.js","actions/tags.js","reducers/tags.js","actions/node-type.js","reducers/node-type.js","actions/index.js","reducers/index.js","config.js","store/helpers.js","actions/check-font-loaded.js","utils/index.js","selectors/tags.js","selectors/linked-nodes.js","selectors/nodes.js","selectors/edges.js","selectors/layout.js","components/flowchart/icon.js","components/flowchart/draw.js","components/flowchart/index.js","components/tag-list/index.js","components/node-list/node-list-toggle.js","selectors/node-types.js","components/node-list/node-list-group.js","components/node-list/node-list-item.js","components/node-list/node-list-groups.js","components/node-list/index.js","components/icons/menu.js","components/sidebar/index.js","components/icon-toolbar/icon-button.js","components/icons/label.js","components/icons/theme.js","components/icons/export.js","components/icon-toolbar/export-modal.js","components/icon-toolbar/index.js","components/wrapper/index.js","utils/random-data.js","store/normalize-data.js","utils/data/lorem-ipsum.mock.js","utils/data/animals.mock.js","utils/data/demo.mock.js","store/initial-state.js","store/load-data.js","components/app/index.js","store/index.js","components/easter-egg/index.js","index.js"],"names":["module","exports","TOGGLE_NODE_CLICKED","TOGGLE_NODES_DISABLED","toggleNodesDisabled","nodeIDs","isDisabled","type","TOGGLE_NODE_HOVERED","toggleNodeHovered","nodeHovered","nodeReducer","nodeState","action","updateState","newState","Object","assign","clicked","nodeClicked","disabled","reduce","id","hovered","TOGGLE_TAG_ACTIVE","TOGGLE_TAG_FILTER","tagReducer","tagState","active","tagID","enabled","TOGGLE_TYPE_DISABLED","nodeTypeReducer","nodeTypeState","typeID","RESET_DATA","resetData","data","TOGGLE_TEXT_LABELS","TOGGLE_THEME","UPDATE_CHART_SIZE","UPDATE_FONT_LOADED","createReducer","key","initialState","state","combinedReducer","combineReducers","node","nodeType","tag","edge","visible","chartSize","fontLoaded","textLabels","theme","rootReducer","resetDataReducer","getDataSource","source","qs","window","location","search","match","REACT_APP_DATA_SOURCE","process","encodeURIComponent","host","validateDataSource","expectedInput","includes","Error","join","config","dataPath","dataSource","localStorageName","loadState","serializedState","localStorage","getItem","JSON","parse","err","console","error","saveState","stringify","setItem","checkFontLoaded","Promise","resolve","fonts","document","fontName","Boolean","check","checkIfLoaded","setTimeout","ready","then","onloadingdone","requestAnimationFrame","step","performance","now","arrayToObject","array","callback","newObject","forEach","getNumberArray","n","Array","from","keys","randomIndex","Math","floor","random","randomNumber","ceil","getRandom","range","length","LOREM_IPSUM","split","getRandomName","map","unique","d","i","arr","indexOf","getTagIDs","ids","getTagEnabled","getTagData","createSelector","name","tagIDs","tagName","tagActive","tagEnabled","sort","getTagCount","total","filter","getCentralNode","clickedNode","hoveredNode","getLinkedNodes","sources","targets","edges","edgeSources","edgeTargets","nodeID","linkedNodes","traverseGraph","prev","next","walk","direction","apply","reverse","getNodeIDs","getNodeName","getNodeDisabledNode","getNodeTags","tags","getNodeType","getNodeTypeDisabled","getNodeDisabledTag","tagCount","nodeTags","some","getNodeDisabled","nodeDisabledNode","nodeDisabledTag","typeDisabled","getNodeActive","centralNode","activeViaTag","getNodeData","nodeName","nodeActive","nodeDisabled","a","b","disabled_node","disabled_tag","disabled_type","getGroupedNodes","nodes","obj","item","hasOwnProperty","push","getNodeTextWidth","svg","select","body","append","attr","nodeTextWidth","text","getBBox","width","remove","getNodeSize","showLabels","isTask","iconSize","padding","x","y","textWidth","innerWidth","height","textOffset","iconOffset","getVisibleNodes","fullName","nodeFullName","nodeSize","label","getEdgeIDs","getEdgeSources","getEdgeTargets","getEdgeDisabled","edgeIDs","edgeID","target","getTransitiveEdges","transitiveEdges","walkGraphEdges","path","concat","addNewEdge","getVisibleEdges","edgeDisabled","getGraph","graph","dagre","graphlib","Graph","setGraph","marginx","marginy","setNode","setEdge","layout","getLayoutNodes","order","getLayoutEdges","getGraphSize","getZoomPosition","container","every","isNaN","Number","isFinite","scale","min","translateX","translateY","paths","task","parameters","svgNode","createElementNS","draw","this","props","el","edgeGroup","selectAll","nodeGroup","lineShape","line","curve","curveBasis","enterEdges","enter","exit","transition","duration","DURATION","merge","classed","attrTween","current","points","previous","interpolatePath","enterNodes","icon","on","handleNodeClick","handleNodeMouseOver","handleNodeMouseOut","handleNodeKeyDown","end","catch","finally","FlowChart","handleWindowResize","updateChartSize","onToggleNodeClicked","event","stopPropagation","handleChartClick","onToggleNodeHovered","showTooltip","hideTooltip","keyCode","tooltipVisible","tooltipIsRight","tooltipText","tooltipX","tooltipY","containerRef","React","createRef","svgRef","wrapperRef","edgesRef","nodesRef","selectD3Elements","initZoomBehaviour","drawChart","zoomChart","addResizeObserver","removeResizeObserver","prevProps","visibleNav","zoom","wrapper","getBoundingClientRect","left","top","navOffset","getNavOffset","onUpdateChartSize","outerWidth","outerHeight","ResizeObserver","resizeObserver","observe","addEventListener","unobserve","removeEventListener","zoomBehaviour","transform","call","zoomIdentity","translate","eventOffset","isRight","xOffset","setState","className","ref","onClick","viewBox","refX","refY","markerUnits","markerWidth","markerHeight","orient","classnames","style","Component","connect","view","dispatch","toggleNodeClicked","onToggleTagActive","toggleTagActive","onToggleTagFilter","toggleTagFilter","defaultText","Fragment","title","onMouseEnter","onMouseLeave","checked","onChange","e","onToggleNodesDisabled","getNodeTypes","types","typeName","onToggleTypeDisabled","toggleTypeDisabled","children","onToggleCollapsed","collapsed","flipId","inverseFlipId","aria-label","toLowerCase","onAppear","classList","add","onanimationend","opacity","onExit","removeElement","dangerouslySetInnerHTML","__html","highlightedLabel","storedState","useState","groupsCollapsed","setCollapsed","flipKey","escapeRegExp","utils","getHighlightedText","handleKeyEvent","NodeList","searchValue","handleKeyDown","bind","updateSearchValue","addHighlightedLabel","newNodes","valueRegex","RegExp","filterNodesByType","nodeMatchesSearch","escape","filteredNodes","filterNodes","formattedNodes","highlightMatch","onKeyDown","value","autoHide","hideTracksWhenNotNeeded","xmlns","ShowMenuButton","onToggle","HideMenuButton","Sidebar","icons","export","IconButton","ariaLabel","ariaLive","labelText","Icon","aria-live","defaultProps","exportGraph","download","format","querySelector","clone","parentNode","appendChild","cloneNode","setAttribute","removeAttribute","createElement","innerHTML","prepend","removeChild","graphSize","toggleModal","onClose","downloadPng","downloadSvg","onToggleTextLabels","onToggleTheme","isModalVisible","themeBtn","labelBtn","exportBtn","Wrapper","toggleNav","MAX_CONNECTED_NODES","MAX_LAYER_COUNT","MAX_TAG_COUNT","Pipeline","CONNECTION_COUNT","LAYER_COUNT","TAG_COUNT","getNodes","generateTags","paramFreq","count","getLayer","getRandomNodeName","replace","full_name","layer","generateNodeList","condition","getRandomTags","getConnectedNodes","findIndex","getSchema","generateRandomPipeline","getDatum","formatData","getInitialPipelineState","isArray","validateInput","schema_id","isParam","addNode","getEdgeID","addEdge","addTag","getPipelineData","getRandomPipeline","loremIpsum","animals","demo","undefined","getInitialState","pipelineData","normalizeData","localStorageState","nodeTypeDisabled","loadJsonData","json","App","store","createStore","reducer","subscribe","getState","configureStore","asyncLoadJsonData","checkWebFontLoading","updatePipelineData","loadData","normalizedData","EasterEgg","play","jest","info","audio","Audio","mp3","loop","KonamiCode","listen","toggleState","toggleAudio","toggleCSS","pause","src","img","alt","ReactDOM","render","getElementById"],"mappings":"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AAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,OAAQ,YAEV,CACE/K,OAAQ,WACR+K,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","file":"static/js/main.199a1de1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/brodyquest.6259cc84.mp3\";","module.exports = __webpack_public_path__ + \"static/media/easter-egg.e702bd5f.png\";","export const TOGGLE_NODE_CLICKED = 'TOGGLE_NODE_CLICKED';\n\n/**\n * Update the value of the currently-active clicked node\n * @param {string|null} nodeClicked The node's unique identifier\n */\nexport function toggleNodeClicked(nodeClicked) {\n  return {\n    type: TOGGLE_NODE_CLICKED,\n    nodeClicked\n  };\n}\n\nexport const TOGGLE_NODES_DISABLED = 'TOGGLE_NODES_DISABLED';\n\n/**\n * Toggle a selected group of nodes' visibility on/off\n * @param {Array} nodeIDs The nodes' unique identifiers\n * @param {Boolean} isDisabled Whether the node should be visible\n */\nexport function toggleNodesDisabled(nodeIDs, isDisabled) {\n  return {\n    type: TOGGLE_NODES_DISABLED,\n    nodeIDs,\n    isDisabled\n  };\n}\n\nexport const TOGGLE_NODE_HOVERED = 'TOGGLE_NODE_HOVERED';\n\n/**\n * Update the value of the currently-active hovered node\n * @param {string|null} nodeHovered The node's unique identifier\n */\nexport function toggleNodeHovered(nodeHovered) {\n  return {\n    type: TOGGLE_NODE_HOVERED,\n    nodeHovered\n  };\n}\n","import {\n  TOGGLE_NODE_CLICKED,\n  TOGGLE_NODES_DISABLED,\n  TOGGLE_NODE_HOVERED\n} from '../actions/nodes';\n\nfunction nodeReducer(nodeState = {}, action) {\n  const updateState = newState => Object.assign({}, nodeState, newState);\n\n  switch (action.type) {\n    case TOGGLE_NODE_CLICKED: {\n      return updateState({\n        clicked: action.nodeClicked\n      });\n    }\n\n    case TOGGLE_NODES_DISABLED: {\n      return updateState({\n        disabled: action.nodeIDs.reduce(\n          (disabled, id) =>\n            Object.assign({}, disabled, {\n              [id]: action.isDisabled\n            }),\n          nodeState.disabled\n        )\n      });\n    }\n\n    case TOGGLE_NODE_HOVERED: {\n      return updateState({\n        hovered: action.nodeHovered\n      });\n    }\n\n    default:\n      return nodeState;\n  }\n}\n\nexport default nodeReducer;\n","export const TOGGLE_TAG_ACTIVE = 'TOGGLE_TAG_ACTIVE';\n\n/**\n * Toggle a tag's highlighting on/off\n * @param {string} tagID Tag id\n * @param {Boolean} active True if tag is active\n */\nexport function toggleTagActive(tagID, active) {\n  return {\n    type: TOGGLE_TAG_ACTIVE,\n    tagID,\n    active\n  };\n}\n\nexport const TOGGLE_TAG_FILTER = 'TOGGLE_TAG_FILTER';\n\n/**\n * Toggle a tag on/off\n * @param {string} tagID Tag id\n * @param {Boolean} enabled True if tag is enabled\n */\nexport function toggleTagFilter(tagID, enabled) {\n  return {\n    type: TOGGLE_TAG_FILTER,\n    tagID,\n    enabled\n  };\n}\n","import { TOGGLE_TAG_ACTIVE, TOGGLE_TAG_FILTER } from '../actions/tags';\n\nfunction tagReducer(tagState = {}, action) {\n  const updateState = newState => Object.assign({}, tagState, newState);\n\n  switch (action.type) {\n    case TOGGLE_TAG_ACTIVE: {\n      return updateState({\n        active: Object.assign({}, tagState.active, {\n          [action.tagID]: action.active\n        })\n      });\n    }\n\n    case TOGGLE_TAG_FILTER: {\n      return updateState({\n        enabled: Object.assign({}, tagState.enabled, {\n          [action.tagID]: action.enabled\n        })\n      });\n    }\n\n    default:\n      return tagState;\n  }\n}\n\nexport default tagReducer;\n","export const TOGGLE_TYPE_DISABLED = 'TOGGLE_TYPE_DISABLED';\n\n/**\n * Toggle a node-type's visibility on/off\n * @param {string} typeID Type id\n * @param {Boolean} disabled True if type is disabled\n */\nexport function toggleTypeDisabled(typeID, disabled) {\n  return {\n    type: TOGGLE_TYPE_DISABLED,\n    typeID,\n    disabled\n  };\n}\n","import { TOGGLE_TYPE_DISABLED } from '../actions/node-type';\n\nfunction nodeTypeReducer(nodeTypeState = {}, action) {\n  switch (action.type) {\n    case TOGGLE_TYPE_DISABLED: {\n      return Object.assign({}, nodeTypeState, {\n        disabled: Object.assign({}, nodeTypeState.disabled, {\n          [action.typeID]: action.disabled\n        })\n      });\n    }\n    default:\n      return nodeTypeState;\n  }\n}\n\nexport default nodeTypeReducer;\n","export const RESET_DATA = 'RESET_DATA';\n\n/**\n * Overwrite the existing data store when receiving new data from upstream\n * @param {Object} data New pipeline state data\n */\nexport function resetData(data) {\n  return {\n    type: RESET_DATA,\n    data\n  };\n}\n\nexport const TOGGLE_TEXT_LABELS = 'TOGGLE_TEXT_LABELS';\n\n/**\n * Toggle whether to show text labels on/off\n * @param {Boolean} textLabels True if text labels are to be shown\n */\nexport function toggleTextLabels(textLabels) {\n  return {\n    type: TOGGLE_TEXT_LABELS,\n    textLabels\n  };\n}\n\nexport const TOGGLE_TAG_FILTER = 'TOGGLE_TAG_FILTER';\n\n/**\n * Toggle a tag on/off\n * @param {string} tagID Tag id\n * @param {Boolean} enabled True if tag is enabled\n */\nexport function toggleTagFilter(tagID, enabled) {\n  return {\n    type: TOGGLE_TAG_FILTER,\n    tagID,\n    enabled\n  };\n}\n\nexport const TOGGLE_THEME = 'TOGGLE_THEME';\n\n/**\n * Switch between light/dark theme\n * @param {string} theme Theme name\n */\nexport function toggleTheme(theme) {\n  return {\n    type: TOGGLE_THEME,\n    theme\n  };\n}\n\nexport const UPDATE_CHART_SIZE = 'UPDATE_CHART_SIZE';\n\n/**\n * Store the chart size, based on the window\n * @param {Object} chartSize getBoundingClientRect value\n */\nexport function updateChartSize(chartSize) {\n  return {\n    type: UPDATE_CHART_SIZE,\n    chartSize\n  };\n}\n\nexport const UPDATE_FONT_LOADED = 'UPDATE_FONT_LOADED';\n\n/**\n * Update whether the webfont has loaded, which should block the chart render\n * @param {Boolean} fontLoaded Whether the font has loaded\n */\nexport function updateFontLoaded(fontLoaded) {\n  return {\n    type: UPDATE_FONT_LOADED,\n    fontLoaded\n  };\n}\n","import { combineReducers } from 'redux';\nimport node from './nodes';\nimport tag from './tags';\nimport nodeType from './node-type';\nimport {\n  RESET_DATA,\n  TOGGLE_TEXT_LABELS,\n  TOGGLE_THEME,\n  UPDATE_CHART_SIZE,\n  UPDATE_FONT_LOADED\n} from '../actions';\n\n/**\n * Create a generic reducer\n * @param {string} type Action type\n * @param {string} key Action payload key\n * @param {*} initialState Default state\n * @return {*} Updated state\n */\nconst createReducer = (type, key, initialState) => (\n  state = initialState,\n  action\n) => {\n  if (action.type === type) {\n    return action[key];\n  }\n  return state;\n};\n\n/**\n * Reset/update application-wide data\n * @param {Object} state Complete app state\n * @param {Object} action Redux action\n * @return {Object} Updated(?) state\n */\nfunction resetDataReducer(state = {}, action) {\n  if (action.type === RESET_DATA) {\n    return Object.assign({}, state, action.data);\n  }\n  return state;\n}\n\nconst combinedReducer = combineReducers({\n  node,\n  nodeType,\n  tag,\n  edge: (state = {}) => state,\n  id: (state = null) => state,\n  visible: (state = {}) => state,\n  chartSize: createReducer(UPDATE_CHART_SIZE, 'chartSize', {}),\n  fontLoaded: createReducer(UPDATE_FONT_LOADED, 'fontLoaded', false),\n  textLabels: createReducer(TOGGLE_TEXT_LABELS, 'textLabels', true),\n  theme: createReducer(TOGGLE_THEME, 'theme', 'dark')\n});\n\nconst rootReducer = (state, action) =>\n  resetDataReducer(combinedReducer(state, action), action);\n\nexport default rootReducer;\n","/**\n * Determine which data source to use\n * @return {string} Data source type key\n */\nconst getDataSource = () => {\n  let source;\n  const qs = window.location.search.match(/data=(\\w+)/);\n  const { REACT_APP_DATA_SOURCE } = process.env;\n  if (qs) {\n    source = encodeURIComponent(qs[1]);\n  } else if (REACT_APP_DATA_SOURCE) {\n    source = REACT_APP_DATA_SOURCE;\n  } else if (window.location.host === 'quantumblacklabs.github.io') {\n    source = 'demo';\n  }\n  return validateDataSource(source);\n};\n\n/**\n * Validate against expected results\n * @param {string} source Input type key\n * @return {string} Data source type key\n */\nconst validateDataSource = source => {\n  const expectedInput = ['lorem', 'animals', 'demo', 'json', 'random'];\n  if (expectedInput.includes(source)) {\n    return source;\n  }\n  if (source) {\n    throw new Error(\n      `Unexpected data source value '${source}'. Your input should be one of the following values: ${expectedInput.join(\n        ', '\n      )}.`\n    );\n  }\n  return 'json';\n};\n\n/**\n * Generate a configuration object for use across the application\n */\nconst config = () => ({\n  dataPath: '/api/nodes.json',\n  dataSource: getDataSource(),\n  localStorageName: 'KedroViz'\n});\n\nexport default config;\n","import config from '../config';\n\n/**\n * Retrieve state data from localStorage\n * @return {Object} State\n */\nexport const loadState = () => {\n  const { localStorageName } = config();\n  try {\n    const serializedState = window.localStorage.getItem(localStorageName);\n    if (serializedState === null) {\n      return {};\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    console.error(err);\n    return {};\n  }\n};\n\n/**\n * Save updated state to localStorage\n * @param {Object} state New state object\n */\nexport const saveState = state => {\n  const { localStorageName } = config();\n  try {\n    const newState = Object.assign(loadState(), state);\n    const serializedState = JSON.stringify(newState);\n    window.localStorage.setItem(localStorageName, serializedState);\n  } catch (err) {\n    console.error(err);\n  }\n};\n","/**\n * Prevent chart from displaying until the webfont has loaded,\n * to ensure that text label SVGRect BBox measurements are accurate\n * @return {Promise} Resolves when font is detected as having loaded, or after 8 seconds\n */\nconst checkFontLoaded = () =>\n  new Promise(resolve => {\n    const { fonts } = document;\n    const fontName = '10px Titillium Web';\n\n    // If FontFaceSet is not supported then default to true immediately\n    if (!Boolean(fonts && fonts.check)) {\n      resolve();\n      return;\n    }\n\n    /**\n     * Check whether the webfont is ready, and show the chart if so\n     */\n    const checkIfLoaded = () => {\n      if (fonts.check(fontName)) {\n        // Add 0.1s delay because fonts.check often returns true too early\n        setTimeout(resolve, 100);\n      }\n    };\n\n    /**\n     * Recursive requestAnimationFrame step function, which acts as a backup\n     * to the native FontFaceSet event handlers.\n     */\n    const step = () => {\n      // If it's been 8 seconds since page load then just set loaded=true\n      if (performance.now() > 8000) {\n        resolve();\n      } else if (fonts.check(fontName)) {\n        // Add 0.1s delay because fonts.check often returns true too early\n        setTimeout(resolve, 100);\n      } else {\n        requestAnimationFrame(step);\n      }\n    };\n\n    if (fonts.check(fontName)) {\n      // If the font is already loaded then dispatch immediately\n      resolve();\n    } else {\n      // Add event listenerss to detect when font has loaded, and display the chart.\n      // This uses both FontFaceSet.ready and FontFaceSet.onloadingdone, as the former\n      // often returns too early, and the latter often doesn't return at all.\n      if (fonts.ready) {\n        fonts.ready.then(checkIfLoaded);\n      }\n      fonts.onloadingdone = checkIfLoaded;\n      // Use requestAnimationFrame as a fallback for older browsers\n      requestAnimationFrame(step);\n    }\n  });\n\nexport default checkFontLoaded;\n","//--- Useful JS utility functions ---//\n\n/**\n * Loop through an array and output to an object\n * @param {Array} array\n * @param {Function} callback\n */\nexport const arrayToObject = (array, callback) => {\n  const newObject = {};\n  array.forEach(key => {\n    newObject[key] = callback(key);\n  });\n  return newObject;\n};\n\n/**\n * Format a UNIX timestamp into a human-readable string\n * @param {number|string} datetime A UNIX timestamp\n * @returns {string} The date and time but prettier\n */\nexport const formatTime = datetime => {\n  const d = new Date(+datetime);\n  return `${d.toDateString()} ${d.toLocaleTimeString()}`;\n};\n\n/**\n * Get an array of numbers\n * @param {number} n Length of the array\n */\nexport const getNumberArray = n => Array.from(Array(n).keys());\n\n/**\n * Get a random number between 0 to n-1, inclusive\n * @param {number} n Max number\n */\nexport const randomIndex = n => Math.floor(Math.random() * n);\n\n/**\n * Get a random number between 1 to n, inclusive\n * @param {number} n Max number\n */\nexport const randomNumber = n => Math.ceil(Math.random() * n);\n\n/**\n * Get a random datum from an array\n * @param {Array} range The array to select a random item from\n */\nexport const getRandom = range => range[randomIndex(range.length)];\n\nconst LOREM_IPSUM = 'lorem ipsum dolor sit amet consectetur adipiscing elit vestibulum id turpis nunc nulla vitae diam dignissim fermentum elit sit amet viverra libero quisque condimentum pellentesque convallis sed consequat neque ac rhoncus finibus'.split(\n  ' '\n);\n\n/**\n * Generate a random latin name\n * @param {number} n Number of words in the name\n * @param {string} join The character(s) used to join each word\n */\nexport const getRandomName = (n, join = '_') =>\n  getNumberArray(n)\n    .map(() => getRandom(LOREM_IPSUM))\n    .join(join);\n\n/**\n * Filter duplicate values from an array\n * @param {any} d Datum\n * @param {number} i Index\n * @param {Array} arr The array to remove duplicate values from\n */\nexport const unique = (d, i, arr) => arr.indexOf(d) === i;\n","import { createSelector } from 'reselect';\n\nconst getTagIDs = state => state.tag.ids;\nconst getTagName = state => state.tag.name;\nconst getTagActive = state => state.tag.active;\nconst getTagEnabled = state => state.tag.enabled;\n\n/**\n * Retrieve the formatted list of tag filters\n */\nexport const getTagData = createSelector(\n  [getTagIDs, getTagName, getTagActive, getTagEnabled],\n  (tagIDs, tagName, tagActive, tagEnabled) =>\n    tagIDs.sort().map(id => ({\n      id,\n      name: tagName[id],\n      active: Boolean(tagActive[id]),\n      enabled: Boolean(tagEnabled[id])\n    }))\n);\n\n/**\n * Get the total and enabled number of tags\n */\nexport const getTagCount = createSelector(\n  [getTagIDs, getTagEnabled],\n  (tagIDs, tagEnabled) => ({\n    total: tagIDs.length,\n    enabled: tagIDs.filter(id => tagEnabled[id]).length\n  })\n);\n","import { createSelector } from 'reselect';\n\nconst getEdgeIDs = state => state.edge.ids;\nconst getEdgeSources = state => state.edge.sources;\nconst getEdgeTargets = state => state.edge.targets;\nconst getClickedNode = state => state.node.clicked;\nconst getHoveredNode = state => state.node.hovered;\n\n/**\n * Get the node that should be used as the center of the set of linked nodes\n * @param {Array} edges\n * @param {string} nodeID\n */\nexport const getCentralNode = createSelector(\n  [getClickedNode, getHoveredNode],\n  (clickedNode, hoveredNode) => clickedNode || hoveredNode\n);\n\n/**\n * Recursively search through the edges data for ancestor and descendant nodes\n * @param {Array} edges\n * @param {string} nodeID\n */\nexport const getLinkedNodes = createSelector(\n  [getEdgeIDs, getEdgeSources, getEdgeTargets, getCentralNode],\n  (edges, edgeSources, edgeTargets, nodeID) => {\n    if (!nodeID) {\n      return {};\n    }\n\n    const linkedNodes = {\n      [nodeID]: true\n    };\n\n    const traverseGraph = (prev, next) => {\n      (function walk(id) {\n        edges.forEach(edge => {\n          if (prev[edge] === id) {\n            linkedNodes[next[edge]] = true;\n            walk(next[edge]);\n          }\n        });\n      })(nodeID);\n    };\n\n    const direction = [edgeSources, edgeTargets];\n    traverseGraph.apply(null, direction);\n    traverseGraph.apply(null, direction.reverse());\n\n    return linkedNodes;\n  }\n);\n","import { createSelector } from 'reselect';\nimport { select } from 'd3-selection';\nimport { arrayToObject } from '../utils';\nimport { getTagCount } from './tags';\nimport { getCentralNode } from './linked-nodes';\n\nconst getNodeIDs = state => state.node.ids;\nconst getNodeName = state => state.node.name;\nconst getNodeFullName = state => state.node.fullName;\nconst getNodeDisabledNode = state => state.node.disabled;\nconst getNodeTags = state => state.node.tags;\nconst getNodeType = state => state.node.type;\nconst getTagActive = state => state.tag.active;\nconst getTagEnabled = state => state.tag.enabled;\nconst getTextLabels = state => state.textLabels;\nconst getFontLoaded = state => state.fontLoaded;\nconst getNodeTypeDisabled = state => state.nodeType.disabled;\n\n/**\n * Calculate whether nodes should be disabled based on their tags\n */\nexport const getNodeDisabledTag = createSelector(\n  [getNodeIDs, getTagEnabled, getTagCount, getNodeTags],\n  (nodeIDs, tagEnabled, tagCount, nodeTags) =>\n    arrayToObject(nodeIDs, nodeID => {\n      if (tagCount.enabled === 0) {\n        return false;\n      }\n      if (nodeTags[nodeID].length) {\n        // Hide task nodes that don't have at least one tag filter enabled\n        return !nodeTags[nodeID].some(tag => tagEnabled[tag]);\n      }\n      return true;\n    })\n);\n\n/**\n * Set disabled status if the node is specifically hidden, and/or via a tag/view/type\n */\nexport const getNodeDisabled = createSelector(\n  [\n    getNodeIDs,\n    getNodeDisabledNode,\n    getNodeDisabledTag,\n    getNodeType,\n    getNodeTypeDisabled\n  ],\n  (nodeIDs, nodeDisabledNode, nodeDisabledTag, nodeType, typeDisabled) =>\n    arrayToObject(nodeIDs, id =>\n      Boolean(\n        nodeDisabledNode[id] ||\n          nodeDisabledTag[id] ||\n          typeDisabled[nodeType[id]]\n      )\n    )\n);\n\n/**\n * Set active status if the node is specifically highlighted, and/or via an associated tag\n * @return {Boolean} True if active\n */\nexport const getNodeActive = createSelector(\n  [getNodeIDs, getCentralNode, getNodeTags, getTagActive],\n  (nodeIDs, centralNode, nodeTags, tagActive) =>\n    arrayToObject(nodeIDs, nodeID => {\n      if (nodeID === centralNode) {\n        return true;\n      }\n      const activeViaTag = nodeTags[nodeID].some(tag => tagActive[tag]);\n      return Boolean(activeViaTag);\n    })\n);\n\n/**\n * Returns formatted nodes as an array, with all relevant properties\n */\nexport const getNodeData = createSelector(\n  [\n    getNodeIDs,\n    getNodeName,\n    getNodeType,\n    getNodeActive,\n    getNodeDisabled,\n    getNodeDisabledNode,\n    getNodeDisabledTag,\n    getNodeTypeDisabled\n  ],\n  (\n    nodeIDs,\n    nodeName,\n    nodeType,\n    nodeActive,\n    nodeDisabled,\n    nodeDisabledNode,\n    nodeDisabledTag,\n    typeDisabled\n  ) =>\n    nodeIDs\n      .sort((a, b) => {\n        if (nodeName[a] < nodeName[b]) return -1;\n        if (nodeName[a] > nodeName[b]) return 1;\n        return 0;\n      })\n      .map(id => ({\n        id,\n        name: nodeName[id],\n        type: nodeType[id],\n        active: nodeActive[id],\n        disabled: nodeDisabled[id],\n        disabled_node: Boolean(nodeDisabledNode[id]),\n        disabled_tag: nodeDisabledTag[id],\n        disabled_type: Boolean(typeDisabled[nodeType[id]])\n      }))\n);\n\n/**\n * Returns formatted nodes grouped by type\n */\nexport const getGroupedNodes = createSelector(\n  [getNodeData],\n  nodes =>\n    nodes.reduce(function(obj, item) {\n      const key = item.type;\n      if (!obj.hasOwnProperty(key)) {\n        obj[key] = [];\n      }\n      obj[key].push(item);\n      return obj;\n    }, {})\n);\n\n/**\n * Temporarily create a new SVG container in the DOM, write a node to it,\n * measure its width with getBBox, then delete the container and store the value\n */\nexport const getNodeTextWidth = createSelector(\n  [getNodeIDs, getNodeName, getFontLoaded],\n  (nodeIDs, nodeName) => {\n    const svg = select(document.body)\n      .append('svg')\n      .attr('class', 'kedro node');\n    const nodeTextWidth = arrayToObject(nodeIDs, nodeID => {\n      const text = svg.append('text').text(nodeName[nodeID]);\n      const node = text.node();\n      const width = node.getBBox ? node.getBBox().width : 0;\n      return width;\n    });\n    svg.remove();\n    return nodeTextWidth;\n  }\n);\n\n/**\n * Get the top/bottom and left/right padding for a node\n * @param {Boolean} showLabels Whether labels are visible\n * @param {Boolean} isTask Whether the node is a task type (vs data/params)\n */\nexport const getPadding = (showLabels, isTask) => {\n  if (showLabels) {\n    return { x: 16, y: 10 };\n  }\n  if (isTask) {\n    return { x: 14, y: 14 };\n  }\n  return { x: 16, y: 16 };\n};\n\n/**\n * Calculate node width/height and icon/text positioning\n */\nexport const getNodeSize = createSelector(\n  [getNodeIDs, getNodeTextWidth, getTextLabels, getNodeType],\n  (nodeIDs, nodeTextWidth, textLabels, nodeType) =>\n    arrayToObject(nodeIDs, nodeID => {\n      const iconSize = textLabels ? 14 : 24;\n      const padding = getPadding(textLabels, nodeType[nodeID] === 'task');\n      const textWidth = textLabels ? nodeTextWidth[nodeID] : 0;\n      const textGap = textLabels ? 6 : 0;\n      const innerWidth = iconSize + textWidth + textGap;\n      return {\n        width: innerWidth + padding.x * 2,\n        height: iconSize + padding.y * 2,\n        textOffset: (innerWidth - textWidth) / 2,\n        iconOffset: -innerWidth / 2,\n        iconSize\n      };\n    })\n);\n\n/**\n * Returns only visible nodes as an array, but without any extra properties\n * that are unnecessary for the chart layout calculation\n */\nexport const getVisibleNodes = createSelector(\n  [\n    getNodeIDs,\n    getNodeName,\n    getNodeType,\n    getNodeDisabled,\n    getNodeFullName,\n    getNodeSize\n  ],\n  (nodeIDs, nodeName, nodeType, nodeDisabled, nodeFullName, nodeSize) =>\n    nodeIDs\n      .filter(id => !nodeDisabled[id])\n      .map(id => ({\n        id,\n        name: nodeName[id],\n        label: nodeName[id],\n        fullName: nodeFullName[id],\n        type: nodeType[id],\n        ...nodeSize[id]\n      }))\n);\n","import { createSelector } from 'reselect';\nimport { arrayToObject } from '../utils';\nimport { getNodeDisabled } from './nodes';\n\nconst getNodeIDs = state => state.node.ids;\nconst getEdgeIDs = state => state.edge.ids;\nconst getEdgeSources = state => state.edge.sources;\nconst getEdgeTargets = state => state.edge.targets;\n\n/**\n * Determine whether an edge should be disabled based on their source/target nodes\n */\nexport const getEdgeDisabled = createSelector(\n  [getEdgeIDs, getNodeDisabled, getEdgeSources, getEdgeTargets],\n  (edgeIDs, nodeDisabled, edgeSources, edgeTargets) =>\n    arrayToObject(edgeIDs, edgeID => {\n      const source = edgeSources[edgeID];\n      const target = edgeTargets[edgeID];\n      return Boolean(nodeDisabled[source] || nodeDisabled[target]);\n    })\n);\n\n/**\n * Create a new transitive edge from the first and last edge in the path\n * @param {string} target Node ID for the new edge\n * @param {string} source Node ID for the new edge\n * @param {object} transitiveEdges Store of existing edges\n */\nexport const addNewEdge = (source, target, { edgeIDs, sources, targets }) => {\n  const id = [source, target].join('|');\n  if (!edgeIDs.includes(id)) {\n    edgeIDs.push(id);\n    sources[id] = source;\n    targets[id] = target;\n  }\n};\n\n/**\n * Create new edges to connect nodes which have a disabled node (or nodes)\n * in between them\n */\nexport const getTransitiveEdges = createSelector(\n  [getNodeIDs, getEdgeIDs, getNodeDisabled, getEdgeSources, getEdgeTargets],\n  (nodeIDs, edgeIDs, nodeDisabled, edgeSources, edgeTargets) => {\n    const transitiveEdges = {\n      edgeIDs: [],\n      sources: {},\n      targets: {}\n    };\n\n    /**\n     * Recursively walk through the graph, stepping over disabled nodes,\n     * generating a list of nodes visited so far, and create transitive edges\n     * for each path that visits disabled nodes between enabled nodes.\n     * @param {Array} path The route that has been explored so far\n     */\n    const walkGraphEdges = path => {\n      edgeIDs.forEach(edgeID => {\n        const source = path[path.length - 1];\n        // Filter to only edges where the source node is the previous target\n        if (edgeSources[edgeID] !== source) {\n          return;\n        }\n        const target = edgeTargets[edgeID];\n        if (nodeDisabled[target]) {\n          // If target node is disabled then keep walking the graph\n          walkGraphEdges(path.concat(target));\n        } else if (path.length > 1) {\n          // Else only create a new edge if there would be 3 or more nodes in the path\n          addNewEdge(path[0], target, transitiveEdges);\n        }\n      });\n    };\n\n    // Only run walk if some nodes are disabled\n    if (nodeIDs.some(nodeID => nodeDisabled[nodeID])) {\n      // Examine the children of every enabled node. The walk only needs\n      // to be run in a single direction (i.e. top down), because links\n      // that end in a terminus can never be transitive.\n      nodeIDs.forEach(nodeID => {\n        if (!nodeDisabled[nodeID]) {\n          walkGraphEdges([nodeID]);\n        }\n      });\n    }\n\n    return transitiveEdges;\n  }\n);\n\n/**\n * Get only the visible edges (plus transitive edges),\n * and return them formatted as an array of objects\n */\nexport const getVisibleEdges = createSelector(\n  [\n    getEdgeIDs,\n    getEdgeDisabled,\n    getEdgeSources,\n    getEdgeTargets,\n    getTransitiveEdges\n  ],\n  (edgeIDs, edgeDisabled, edgeSources, edgeTargets, transitiveEdges) =>\n    edgeIDs\n      .filter(id => !edgeDisabled[id])\n      .concat(transitiveEdges.edgeIDs)\n      .map(id => ({\n        id,\n        source: edgeSources[id] || transitiveEdges.sources[id],\n        target: edgeTargets[id] || transitiveEdges.targets[id]\n      }))\n);\n","import { createSelector } from 'reselect';\nimport dagre from 'dagre';\nimport { getNodeActive, getVisibleNodes } from './nodes';\nimport { getVisibleEdges } from './edges';\n\nconst getNodeType = state => state.node.type;\nconst getChartSize = state => state.chartSize;\n\n/**\n * Calculate chart layout with Dagre.js.\n * This is an extremely expensive operation so we want it to run as infrequently\n * as possible, and keep it separate from other properties (like node.active)\n * which don't affect layout.\n */\nexport const getGraph = createSelector(\n  [getVisibleNodes, getVisibleEdges],\n  (nodes, edges) => {\n    const graph = new dagre.graphlib.Graph().setGraph({\n      marginx: 40,\n      marginy: 40\n    });\n\n    nodes.forEach(node => {\n      graph.setNode(node.id, node);\n    });\n\n    edges.forEach(edge => {\n      graph.setEdge(edge.source, edge.target, edge);\n    });\n\n    // Run Dagre layout to calculate X/Y positioning\n    dagre.layout(graph);\n\n    return graph;\n  }\n);\n\n/**\n * Reformat node data for use on the chart,\n * and recombine with other data that doesn't affect layout\n */\nexport const getLayoutNodes = createSelector(\n  [getGraph, getNodeType, getNodeActive],\n  (graph, nodeType, nodeActive) =>\n    graph.nodes().map(nodeID => {\n      const node = graph.node(nodeID);\n      return Object.assign({}, node, {\n        type: nodeType[nodeID],\n        order: node.x + node.y * 9999,\n        active: nodeActive[nodeID]\n      });\n    })\n);\n\n/**\n * Reformat edge data for use on the chart\n */\nexport const getLayoutEdges = createSelector(\n  [getGraph],\n  graph => graph.edges().map(edge => Object.assign({}, graph.edge(edge)))\n);\n\n/**\n * Get width, height and margin of graph\n */\nexport const getGraphSize = createSelector(\n  [getGraph],\n  graph => graph.graph()\n);\n\n/**\n * Get chart zoom translation/scale,\n * by comparing native graph width/height to container width/height\n */\nexport const getZoomPosition = createSelector(\n  [getGraphSize, getChartSize],\n  (graph, container) => {\n    const validDimensions = [\n      container.width,\n      container.height,\n      graph.width,\n      graph.height\n    ].every(n => !isNaN(n) && Number.isFinite(n));\n\n    if (validDimensions) {\n      const scale = Math.min(\n        container.width / graph.width,\n        container.height / graph.height\n      );\n      return {\n        scale,\n        translateX: container.width / 2 - (graph.width * scale) / 2,\n        translateY: container.height / 2 - (graph.height * scale) / 2\n      };\n    }\n    return {\n      scale: 1,\n      translateX: 0,\n      translateY: 0\n    };\n  }\n);\n","import { select } from 'd3-selection';\n\nconst paths = {\n  // database icon\n  data: [\n    'M12 1c4.3 0 7.8 1.5 8 3.4v15.1c0 2-3.6 3.5-8 3.5s-8-1.6-8-3.5V4.4C4.2 2.5 7.7 1 12 1zm0 17a14 14 0 01-6-1.2v3a14 14 0 006 1.2 14 14 0 006-1.2v-3a14 14 0 01-6 1.2zm0-5a14 14 0 01-6-1.2v3a14 14 0 006 1.2 14 14 0 006-1.2v-3a14 14 0 01-6 1.2zm0-5a14 14 0 01-6-1.2v3a14 14 0 006 1.2 14 14 0 006-1.2v-3A14 14 0 0112 8zm.3-5H12c-3.3 0-6 .7-6 1.5S8.7 6 12 6s6-.7 6-1.5S15.5 3 12.3 3z'\n  ],\n  // cogs icon\n  task: [\n    'M6.05.75L7.857.332a1.236 1.236 0 011.445.792l.039.134.22.95c.789.079 1.557.295 2.271.638l.303.154.714-.666a1.236 1.236 0 011.647-.036l.1.097 1.266 1.357c.432.466.437 1.176.032 1.647l-.093.097-.715.666c.33.722.529 1.496.589 2.286l.017.34.933.284c.61.187.97.801.854 1.413l-.033.131-.542 1.774a1.236 1.236 0 01-1.408.855l-.136-.034-.935-.285a6.755 6.755 0 01-1.682 1.65l-.285.185.221.956a1.236 1.236 0 01-.797 1.448l-.135.038-1.806.417a1.236 1.236 0 01-1.445-.792l-.039-.134-.22-.95a6.863 6.863 0 01-2.273-.636l-.302-.154-.715.665a1.236 1.236 0 01-1.647.035l-.1-.096L1.934 14.2a1.236 1.236 0 01-.035-1.647l.097-.1.715-.667a6.75 6.75 0 01-.588-2.285l-.018-.34-.933-.285A1.236 1.236 0 01.32 7.468l.033-.135.543-1.771a1.236 1.236 0 011.408-.855l.136.034.935.285a6.75 6.75 0 011.682-1.65l.285-.185-.221-.956A1.236 1.236 0 015.914.788L6.05.75zm1.875 4.004a4.333 4.333 0 101.95 8.444 4.333 4.333 0 00-1.95-8.444zm.549 2.375a1.896 1.896 0 11.852 3.694 1.896 1.896 0 01-.852-3.694zM19.02 13.214l1.123.218a.76.76 0 01.615.773l-.013.12-.115.588c.416.237.787.543 1.099.905l.15.185.569-.196a.76.76 0 01.919.362l.048.11.371 1.08a.761.761 0 01-.375.924l-.095.04-.569.196c.004.466-.07.928-.218 1.367l-.098.261.453.394c.29.253.343.677.138.99l-.063.083-.749.862a.76.76 0 01-.976.146l-.097-.071-.454-.395a4.157 4.157 0 01-1.33.502l-.235.038-.116.593a.76.76 0 01-.776.616l-.12-.014-1.12-.218a.76.76 0 01-.615-.773l.013-.119.115-.589a4.223 4.223 0 01-1.073-.874l-.178-.215-.568.195a.76.76 0 01-.92-.362l-.047-.11-.372-1.08a.76.76 0 01.362-.918l.11-.048.57-.196c-.005-.465.07-.927.218-1.366l.098-.26-.453-.395a.76.76 0 01-.147-.977l.071-.097.749-.86a.76.76 0 01.977-.146l.096.071.455.395a4.154 4.154 0 011.33-.501l.235-.038.115-.593a.76.76 0 01.774-.617l.12.014zm.053 2.721a2.667 2.667 0 10-1.017 5.235 2.667 2.667 0 001.017-5.235zm-.286 1.472a1.167 1.167 0 11-.445 2.29 1.167 1.167 0 01.445-2.29z'\n  ],\n  // sliders icon\n  parameters: [\n    'M11.2 18a3 3 0 0 0 0 2H3v-2h8.2zm9.8 0v2h-4.2a3 3 0 0 0 0-2H21zM5.2 11a3 3 0 0 0 0 2H3v-2h2.2zM21 11v2H10.8a3 3 0 0 0 0-2H21zm-9-6c0 .4 0 .7.2 1H3V4h9.2a3 3 0 0 0-.2 1zm9-1v2h-3.2a3 3 0 0 0 0-2H21zM14 17a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm-6-7a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm7-7a2 2 0 1 1 0 4 2 2 0 0 1 0-4z'\n  ]\n};\n\n/**\n * Generate cog/database icon.\n * Inline SVG is required to support image exports\n */\nexport default node => {\n  const svgNode = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\n  const svg = select(svgNode)\n    .attr('class', 'node__icon')\n    .attr('viewBox', '0 0 24 24');\n\n  paths[node.type].forEach(path => {\n    svg.append('path').attr('d', path);\n  });\n\n  return svgNode;\n};\n","import 'd3-transition';\nimport { interpolatePath } from 'd3-interpolate-path';\nimport { select } from 'd3-selection';\nimport { curveBasis, line } from 'd3-shape';\nimport icon from './icon';\n\n/**\n * Render chart to the DOM with D3\n */\nconst draw = function() {\n  const { nodes, edges, centralNode, linkedNodes, textLabels } = this.props;\n\n  // Create selections\n  this.el.edges = this.el.edgeGroup\n    .selectAll('.edge')\n    .data(edges, edge => edge.id);\n\n  this.el.nodes = this.el.nodeGroup\n    .selectAll('.node')\n    .data(nodes, node => node.id);\n\n  // Set up line shape function\n  const lineShape = line()\n    .x(d => d.x)\n    .y(d => d.y)\n    .curve(curveBasis);\n\n  // Create edges\n  const enterEdges = this.el.edges\n    .enter()\n    .append('g')\n    .attr('class', 'edge')\n    .attr('opacity', 0);\n\n  enterEdges.append('path').attr('marker-end', d => `url(#arrowhead)`);\n\n  this.el.edges\n    .exit()\n    .transition('exit-edges')\n    .duration(this.DURATION)\n    .attr('opacity', 0)\n    .remove();\n\n  this.el.edges = this.el.edges.merge(enterEdges);\n\n  this.el.edges\n    .attr('data-id', edge => edge.id)\n    .classed(\n      'edge--faded',\n      ({ source, target }) =>\n        centralNode && (!linkedNodes[source] || !linkedNodes[target])\n    )\n    .transition('show-edges')\n    .duration(this.DURATION)\n    .attr('opacity', 1);\n\n  this.el.edges\n    .select('path')\n    .transition('update-edges')\n    .duration(this.DURATION)\n    .attrTween('d', function(edge) {\n      const current = edge.points && lineShape(edge.points);\n      const previous = select(this).attr('d') || current;\n      return interpolatePath(previous, current);\n    });\n\n  // Create nodes\n  const enterNodes = this.el.nodes\n    .enter()\n    .append('g')\n    .attr('tabindex', '0')\n    .attr('class', 'node');\n\n  enterNodes\n    .attr('transform', node => `translate(${node.x}, ${node.y})`)\n    .attr('opacity', 0);\n\n  enterNodes.append('rect');\n\n  enterNodes.append(icon);\n\n  enterNodes\n    .append('text')\n    .text(node => node.name)\n    .attr('text-anchor', 'middle')\n    .attr('dy', 3.5)\n    .attr('dx', node => node.textOffset);\n\n  this.el.nodes\n    .exit()\n    .transition('exit-nodes')\n    .duration(this.DURATION)\n    .attr('opacity', 0)\n    .remove();\n\n  this.el.nodes = this.el.nodes\n    .merge(enterNodes)\n    .attr('data-id', node => node.id)\n    .classed('node--parameters', node => node.type === 'parameters')\n    .classed('node--data', node => node.type === 'data')\n    .classed('node--task', node => node.type === 'task')\n    .classed('node--icon', !textLabels)\n    .classed('node--text', textLabels)\n    .classed('node--active', node => node.active)\n    .classed('node--highlight', node => centralNode && linkedNodes[node.id])\n    .classed('node--faded', node => centralNode && !linkedNodes[node.id])\n    .on('click', this.handleNodeClick)\n    .on('mouseover', this.handleNodeMouseOver)\n    .on('mouseout', this.handleNodeMouseOut)\n    .on('focus', this.handleNodeMouseOver)\n    .on('blur', this.handleNodeMouseOut)\n    .on('keydown', this.handleNodeKeyDown);\n\n  this.el.nodes\n    .transition('update-nodes')\n    .duration(this.DURATION)\n    .attr('opacity', 1)\n    .attr('transform', node => `translate(${node.x}, ${node.y})`)\n    .end()\n    .catch(() => {})\n    .finally(() => {\n      // Sort nodes so tab focus order follows X/Y position\n      this.el.nodes.sort((a, b) => a.order - b.order);\n    });\n\n  this.el.nodes\n    .select('rect')\n    .attr('width', node => node.width - 5)\n    .attr('height', node => node.height - 5)\n    .attr('x', node => (node.width - 5) / -2)\n    .attr('y', node => (node.height - 5) / -2)\n    .attr('rx', node => (node.type === 'task' ? 0 : node.height / 2));\n\n  this.el.nodes\n    .select('.node__icon')\n    .transition('node-icon-offset')\n    .duration(150)\n    .attr('width', node => node.iconSize)\n    .attr('height', node => node.iconSize)\n    .attr('x', node => node.iconOffset)\n    .attr('y', node => node.iconSize / -2);\n};\n\nexport default draw;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport 'd3-transition';\nimport { select, event } from 'd3-selection';\nimport { zoom, zoomIdentity } from 'd3-zoom';\nimport { updateChartSize } from '../../actions';\nimport { toggleNodeClicked, toggleNodeHovered } from '../../actions/nodes';\nimport {\n  getLayoutNodes,\n  getLayoutEdges,\n  getZoomPosition\n} from '../../selectors/layout';\nimport { getCentralNode, getLinkedNodes } from '../../selectors/linked-nodes';\nimport draw from './draw';\nimport './styles/flowchart.css';\n\n/**\n * Display a pipeline flowchart, mostly rendered with D3\n */\nexport class FlowChart extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltipVisible: false,\n      tooltipIsRight: false,\n      tooltipText: null,\n      tooltipX: 0,\n      tooltipY: 0\n    };\n\n    this.DURATION = 700;\n\n    this.containerRef = React.createRef();\n    this.svgRef = React.createRef();\n    this.wrapperRef = React.createRef();\n    this.edgesRef = React.createRef();\n    this.nodesRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.selectD3Elements();\n    this.updateChartSize();\n    this.initZoomBehaviour();\n    this.drawChart();\n    this.zoomChart();\n    this.addResizeObserver();\n  }\n\n  componentWillUnmount() {\n    this.removeResizeObserver();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.visibleNav !== this.props.visibleNav) {\n      this.updateChartSize();\n    }\n    if (prevProps.zoom !== this.props.zoom) {\n      this.zoomChart();\n    }\n    this.drawChart();\n  }\n\n  /**\n   * Create D3 element selectors\n   */\n  selectD3Elements() {\n    this.el = {\n      svg: select(this.svgRef.current),\n      wrapper: select(this.wrapperRef.current),\n      edgeGroup: select(this.edgesRef.current),\n      nodeGroup: select(this.nodesRef.current)\n    };\n  }\n\n  /**\n   * Configure globals for the container dimensions,\n   * and apply them to the chart SVG\n   */\n  updateChartSize() {\n    const {\n      left,\n      top,\n      width,\n      height\n    } = this.containerRef.current.getBoundingClientRect();\n    const navOffset = this.getNavOffset(width);\n    this.props.onUpdateChartSize({\n      x: left,\n      y: top,\n      outerWidth: width,\n      outerHeight: height,\n      width: width - navOffset,\n      height,\n      navOffset\n    });\n  }\n\n  getNavOffset(width) {\n    const navWidth = 300; // from _variables.scss\n    const breakpointSmall = 480; // from _variables.scss\n    if (this.props.visibleNav && width > breakpointSmall) {\n      return navWidth;\n    }\n    return 0;\n  }\n\n  /**\n   * Add ResizeObserver to listen for any changes in the container's width/height\n   * (with event listener fallback)\n   */\n  addResizeObserver() {\n    if (window.ResizeObserver) {\n      this.resizeObserver =\n        this.resizeObserver ||\n        new window.ResizeObserver(this.handleWindowResize);\n      this.resizeObserver.observe(this.containerRef.current);\n    } else {\n      window.addEventListener('resize', this.handleWindowResize);\n    }\n  }\n\n  /**\n   * Remove ResizeObserver (or event listener fallback) on unmount\n   */\n  removeResizeObserver() {\n    if (window.ResizeObserver) {\n      this.resizeObserver.unobserve(this.containerRef.current);\n    } else {\n      window.removeEventListener('resize', this.handleWindowResize);\n    }\n  }\n\n  /**\n   * Handle window resize\n   */\n  handleWindowResize = () => {\n    this.updateChartSize();\n  };\n\n  /**\n   * Setup D3 zoom behaviour on component mount\n   */\n  initZoomBehaviour() {\n    this.zoomBehaviour = zoom().on('zoom', () => {\n      this.el.wrapper.attr('transform', event.transform);\n      this.hideTooltip();\n    });\n    this.el.svg.call(this.zoomBehaviour);\n  }\n\n  /**\n   * Zoom and scale to fit\n   */\n  zoomChart() {\n    const { chartSize, zoom } = this.props;\n    const { scale, translateX, translateY } = zoom;\n    const navOffset = this.getNavOffset(chartSize.outerWidth);\n    this.el.svg\n      .transition()\n      .duration(this.DURATION)\n      .call(\n        this.zoomBehaviour.transform,\n        zoomIdentity.translate(translateX + navOffset, translateY).scale(scale)\n      );\n  }\n\n  /**\n   * Render chart to the DOM with D3\n   */\n  drawChart() {\n    draw.call(this);\n  }\n\n  /**\n   * Enable a node's focus state and highlight linked nodes\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeClick = node => {\n    this.props.onToggleNodeClicked(node.id);\n    event.stopPropagation();\n  };\n\n  /**\n   * Remove a node's focus state and dim linked nodes\n   */\n  handleChartClick = () => {\n    this.props.onToggleNodeClicked(null);\n  };\n\n  /**\n   * Enable a node's active state, show tooltip, and highlight linked nodes\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeMouseOver = node => {\n    this.props.onToggleNodeHovered(node.id);\n    this.showTooltip(node);\n  };\n\n  /**\n   * Remove a node's active state, hide tooltip, and dim linked nodes\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeMouseOut = () => {\n    this.props.onToggleNodeHovered(null);\n    this.hideTooltip();\n  };\n\n  /**\n   * Handle keydown event when a node is focused\n   * @param {Object} node Datum for a single node\n   */\n  handleNodeKeyDown = node => {\n    const ENTER = 13;\n    const ESCAPE = 27;\n    if (event.keyCode === ENTER) {\n      this.handleNodeClick(node);\n    }\n    if (event.keyCode === ESCAPE) {\n      this.handleChartClick();\n      this.handleNodeMouseOut(node);\n    }\n  };\n\n  /**\n   * Show, fill and and position the tooltip\n   * @param {Object} node A node datum\n   */\n  showTooltip(node) {\n    const { chartSize } = this.props;\n    const eventOffset = event.target.getBoundingClientRect();\n    const navOffset = this.getNavOffset(chartSize.outerWidth);\n    const isRight = eventOffset.left - navOffset > chartSize.width / 2;\n    const xOffset = isRight\n      ? eventOffset.left - (chartSize.width + navOffset)\n      : eventOffset.left;\n    this.setState({\n      tooltipVisible: true,\n      tooltipIsRight: isRight,\n      tooltipText: node.fullName,\n      tooltipX: xOffset - chartSize.x + eventOffset.width / 2,\n      tooltipY: eventOffset.top - chartSize.y\n    });\n  }\n\n  /**\n   * Hide the tooltip\n   */\n  hideTooltip() {\n    if (this.state.tooltipVisible) {\n      this.setState({\n        tooltipVisible: false\n      });\n    }\n  }\n\n  /**\n   * Render React elements\n   */\n  render() {\n    const { outerWidth, outerHeight } = this.props.chartSize;\n    const {\n      tooltipVisible,\n      tooltipIsRight,\n      tooltipText,\n      tooltipX,\n      tooltipY\n    } = this.state;\n\n    return (\n      <div\n        className=\"pipeline-flowchart kedro\"\n        ref={this.containerRef}\n        onClick={this.handleChartClick}>\n        <svg\n          id=\"pipeline-graph\"\n          className=\"pipeline-flowchart__graph\"\n          width={outerWidth}\n          height={outerHeight}\n          ref={this.svgRef}>\n          <defs>\n            <marker\n              id=\"arrowhead\"\n              className=\"pipeline-flowchart__arrowhead\"\n              viewBox=\"0 0 10 10\"\n              refX=\"7\"\n              refY=\"5\"\n              markerUnits=\"strokeWidth\"\n              markerWidth=\"8\"\n              markerHeight=\"6\"\n              orient=\"auto\">\n              <path d=\"M 0 0 L 10 5 L 0 10 L 4 5 z\" />\n            </marker>\n          </defs>\n          <g id=\"zoom-wrapper\" ref={this.wrapperRef}>\n            <g className=\"pipeline-flowchart__edges\" ref={this.edgesRef} />\n            <g\n              id=\"nodes\"\n              className=\"pipeline-flowchart__nodes\"\n              ref={this.nodesRef}\n            />\n          </g>\n        </svg>\n        <div\n          className={classnames('pipeline-flowchart__tooltip kedro', {\n            'tooltip--visible': tooltipVisible,\n            'tooltip--right': tooltipIsRight\n          })}\n          style={{ transform: `translate(${tooltipX}px, ${tooltipY}px)` }}>\n          <span>{tooltipText}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const mapStateToProps = state => ({\n  centralNode: getCentralNode(state),\n  chartSize: state.chartSize,\n  edges: getLayoutEdges(state),\n  linkedNodes: getLinkedNodes(state),\n  nodes: getLayoutNodes(state),\n  textLabels: state.textLabels,\n  view: state.view,\n  zoom: getZoomPosition(state)\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleNodeClicked: nodeClicked => {\n    dispatch(toggleNodeClicked(nodeClicked));\n  },\n  onToggleNodeHovered: nodeHovered => {\n    dispatch(toggleNodeHovered(nodeHovered));\n  },\n  onUpdateChartSize: chartSize => {\n    dispatch(updateChartSize(chartSize));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FlowChart);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Checkbox from '@quantumblack/kedro-ui/lib/components/checkbox';\nimport Dropdown from '@quantumblack/kedro-ui/lib/components/dropdown';\nimport '@quantumblack/kedro-ui/lib/components/menu-option/menu-option.css';\nimport { toggleTagActive, toggleTagFilter } from '../../actions/tags';\nimport { getTagData, getTagCount } from '../../selectors/tags';\nimport './tag-list.css';\n\n/**\n * A Dropdown displaying a list of tags with checkboxes to toggle them on/off\n * @param {Object} tagCount Number of enabled and active tags\n * @param {Function} onToggleTagActive Handle toggling a tag's active state\n * @param {Function} onToggleTagFilter Handle toggling a tag's enabled state\n * @param {Array} tags List of tags for given pipline\n * @param {string} theme Kedro UI light/dark theme\n */\nexport const TagList = ({\n  tagCount,\n  onToggleTagActive,\n  onToggleTagFilter,\n  tags,\n  theme\n}) => (\n  <div className=\"pipeline-tags\">\n    <Dropdown\n      theme={theme}\n      width={null}\n      defaultText={`Tag filters (${tagCount.enabled}/${tagCount.total})`}>\n      <React.Fragment>\n        {tagCount.total > 0 ? (\n          <ul className=\"pipeline-tags__tag-list\">\n            {tags.map(tag => (\n              <li\n                key={`tag-${tag.id}`}\n                title={tag.name}\n                className=\"pipeline-tags__tag-list-item kui-menu-option\"\n                onMouseEnter={() => onToggleTagActive(tag.id, true)}\n                onMouseLeave={() => onToggleTagActive(tag.id, false)}>\n                <Checkbox\n                  checked={tag.enabled}\n                  label={<span>{tag.name}</span>}\n                  name={tag.id}\n                  onChange={(e, { checked }) =>\n                    onToggleTagFilter(tag.id, checked)\n                  }\n                  theme={theme}\n                />\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <div className=\"pipeline-tags__empty kui-menu-option\">\n            There are no tags used in this pipeline.\n          </div>\n        )}\n      </React.Fragment>\n    </Dropdown>\n  </div>\n);\n\nexport const mapStateToProps = state => {\n  const tags = getTagData(state);\n  const tagCount = getTagCount(state);\n  return {\n    tagCount,\n    tags,\n    theme: state.theme\n  };\n};\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleTagActive: (tagID, active) => {\n    dispatch(toggleTagActive(tagID, active));\n  },\n  onToggleTagFilter: (tagID, enabled) => {\n    dispatch(toggleTagFilter(tagID, enabled));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TagList);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { toggleNodesDisabled } from '../../actions/nodes';\n\nconst NodeListToggleAll = ({ onToggleNodesDisabled, nodeIDs }) => (\n  <div className=\"kedro\">\n    <h2 className=\"pipeline-node-list__toggle-title\">All Elements</h2>\n    <div className=\"pipeline-node-list__toggle-container\">\n      <button\n        onClick={() => onToggleNodesDisabled(nodeIDs, false)}\n        className=\"pipeline-node-list__toggle\">\n        <svg\n          className=\"pipeline-node-list__icon pipeline-node-list__icon--check\"\n          width=\"24\"\n          height=\"24\">\n          <polygon points=\"9.923 14.362 7.385 11.944 6 13.263 7.33384369 14.5336026 9.923 17 18 9.32 16.615 8\" />\n        </svg>\n        Check all\n      </button>\n      <button\n        onClick={() => onToggleNodesDisabled(nodeIDs, true)}\n        className=\"pipeline-node-list__toggle\">\n        <svg\n          className=\"pipeline-node-list__icon pipeline-node-list__icon--uncheck\"\n          width=\"24\"\n          height=\"24\">\n          <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n        </svg>\n        Uncheck all\n      </button>\n    </div>\n  </div>\n);\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleNodesDisabled: (nodeIDs, disabled) => {\n    dispatch(toggleNodesDisabled(nodeIDs, disabled));\n  }\n});\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(NodeListToggleAll);\n","import { createSelector } from 'reselect';\n\nconst getNodeTypeIDs = state => state.nodeType.ids;\nconst getNodeTypeName = state => state.nodeType.name;\nconst getNodeTypeDisabled = state => state.nodeType.disabled;\n\n/**\n * Get formatted list of node type objects\n */\nexport const getNodeTypes = createSelector(\n  [getNodeTypeIDs, getNodeTypeName, getNodeTypeDisabled],\n  (types, typeName, typeDisabled) =>\n    types.map(id => ({\n      id,\n      name: typeName[id],\n      disabled: Boolean(typeDisabled[id])\n    }))\n);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport { Flipped } from 'react-flip-toolkit';\nimport Checkbox from '@quantumblack/kedro-ui/lib/components/checkbox';\nimport { toggleTypeDisabled } from '../../actions/node-type';\n\nexport const NodeListGroup = ({\n  children,\n  onToggleTypeDisabled,\n  onToggleCollapsed,\n  theme,\n  type,\n  collapsed\n}) => (\n  <Flipped flipId={type.id}>\n    <li>\n      <Flipped inverseFlipId={type.id} scale>\n        <div>\n          <h3 className=\"pipeline-node pipeline-node--heading\">\n            <Checkbox\n              checked={!type.disabled}\n              label={type.name}\n              name={type.name}\n              onChange={(e, { checked }) => {\n                onToggleTypeDisabled(type.id, !checked);\n              }}\n              theme={theme}\n            />\n            <button\n              aria-label={`${\n                collapsed ? 'Show' : 'Hide'\n              } ${type.name.toLowerCase()}`}\n              onClick={() => onToggleCollapsed(type.id)}\n              className={classnames('pipeline-type-group-toggle', {\n                'pipeline-type-group-toggle--alt': collapsed\n              })}>\n              \n            </button>\n          </h3>\n          <Flipped\n            flipId={`${type.id}-children`}\n            onAppear={el => {\n              el.classList.add('pipeline-node-list--fade-in');\n              el.onanimationend = () => {\n                el.style.opacity = 1;\n                el.classList.remove('pipeline-node-list--fade-in');\n              };\n            }}\n            onExit={(el, i, removeElement) => {\n              el.style.opacity = 0;\n              el.classList.add('pipeline-node-list--fade-out');\n              el.onanimationend = removeElement;\n            }}\n            opacity>\n            {collapsed ? null : (\n              <ul className=\"pipeline-node-list pipeline-node-list--nested\">\n                {children}\n              </ul>\n            )}\n          </Flipped>\n        </div>\n      </Flipped>\n    </li>\n  </Flipped>\n);\n\nexport const mapStateToProps = state => ({\n  theme: state.theme\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleTypeDisabled: (typeID, disabled) => {\n    dispatch(toggleTypeDisabled(typeID, disabled));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(NodeListGroup);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport Checkbox from '@quantumblack/kedro-ui/lib/components/checkbox';\nimport { toggleNodeHovered, toggleNodesDisabled } from '../../actions/nodes';\n\nexport const NodeListItem = ({\n  onToggleNodesDisabled,\n  onToggleNodeHovered,\n  node,\n  theme\n}) => (\n  <li\n    className={classnames('pipeline-node pipeline-node--nested', {\n      'pipeline-node--active': node.active,\n      'pipeline-node--disabled': node.disabled_tag || node.disabled_type\n    })}\n    title={node.name}\n    onMouseEnter={() => onToggleNodeHovered(node.id)}\n    onMouseLeave={() => onToggleNodeHovered(null)}>\n    <Checkbox\n      checked={!node.disabled_node}\n      label={\n        <span\n          dangerouslySetInnerHTML={{\n            __html: node.highlightedLabel\n          }}\n        />\n      }\n      name={node.name}\n      onChange={(e, { checked }) => onToggleNodesDisabled([node.id], !checked)}\n      theme={theme}\n    />\n  </li>\n);\n\nexport const mapStateToProps = state => ({\n  theme: state.theme\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleNodeHovered: nodeID => {\n    dispatch(toggleNodeHovered(nodeID));\n  },\n  onToggleNodesDisabled: (nodeIDs, disabled) => {\n    dispatch(toggleNodesDisabled(nodeIDs, disabled));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(NodeListItem);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Flipper } from 'react-flip-toolkit';\nimport { loadState, saveState } from '../../store/helpers';\nimport { getNodeTypes } from '../../selectors/node-types';\nimport NodeListGroup from './node-list-group';\nimport NodeListItem from './node-list-item';\n\nconst storedState = loadState();\n\nconst NodeListGroups = ({ nodes, types }) => {\n  const [collapsed, setCollapsed] = useState(storedState.groupsCollapsed || {});\n\n  const onToggleCollapsed = typeID => {\n    const groupsCollapsed = Object.assign({}, collapsed, {\n      [typeID]: !collapsed[typeID]\n    });\n    setCollapsed(groupsCollapsed);\n    saveState({ groupsCollapsed });\n  };\n\n  const renderTypeGroup = type => {\n    if (!nodes[type.id]) {\n      return null;\n    }\n    return (\n      <NodeListGroup\n        key={type.id}\n        onToggleCollapsed={onToggleCollapsed}\n        type={type}\n        collapsed={collapsed[type.id]}>\n        {nodes[type.id].map(node => (\n          <NodeListItem key={node.id} node={node} />\n        ))}\n      </NodeListGroup>\n    );\n  };\n\n  return (\n    <Flipper flipKey={collapsed}>\n      <ul className=\"pipeline-node-list\">{types.map(renderTypeGroup)}</ul>\n    </Flipper>\n  );\n};\n\nexport const mapStateToProps = state => ({\n  types: getNodeTypes(state)\n});\n\nexport default connect(mapStateToProps)(NodeListGroups);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport SearchBar from '@quantumblack/kedro-ui/lib/components/search-bar';\nimport utils from '@quantumblack/kedro-ui/lib/utils';\nimport { Scrollbars } from 'react-custom-scrollbars';\nimport { getGroupedNodes } from '../../selectors/nodes';\nimport NodeListToggleAll from './node-list-toggle';\nimport NodeListGroups from './node-list-groups';\nimport './node-list.css';\n\nconst { escapeRegExp, getHighlightedText, handleKeyEvent } = utils;\n\n/**\n * Get a list of IDs of the visible nodes\n * @param {object} nodes Grouped nodes\n * @return {array} List of node IDs\n */\nexport const getNodeIDs = nodes => {\n  const getNodeIDs = type => nodes[type].map(node => node.id);\n  const concatNodeIDs = (nodeIDs, type) => nodeIDs.concat(getNodeIDs(type));\n\n  return Object.keys(nodes).reduce(concatNodeIDs, []);\n};\n\n/**\n * Scrollable list of toggleable nodes, with search & filter functionality\n */\nclass NodeList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      searchValue: ''\n    };\n\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.updateSearchValue = this.updateSearchValue.bind(this);\n  }\n\n  /**\n   * Add a new highlightedLabel field to each of the node objects\n   * @param {object} nodes Grouped lists of nodes\n   * @return {object} The grouped nodes with highlightedLabel fields added\n   */\n  highlightMatch(nodes) {\n    const { searchValue } = this.state;\n    const addHighlightedLabel = node => ({\n      highlightedLabel: getHighlightedText(node.name, searchValue),\n      ...node\n    });\n    const addLabelsToNodes = (newNodes, type) => ({\n      ...newNodes,\n      [type]: nodes[type].map(addHighlightedLabel)\n    });\n\n    return Object.keys(nodes).reduce(addLabelsToNodes, {});\n  }\n\n  /**\n   * Check whether a name matches the search text\n   * @param {string} name\n   * @param {string} searchValue\n   * @return {boolean} True if match\n   */\n  nodeMatchesSearch(node, searchValue) {\n    const valueRegex = searchValue\n      ? new RegExp(escapeRegExp(searchValue), 'gi')\n      : '';\n    return Boolean(node.name.match(valueRegex));\n  }\n\n  /**\n   * Return only the results that match the search text\n   * @return {object} Grouped nodes\n   */\n  filterNodes() {\n    const { nodes } = this.props;\n    const { searchValue } = this.state;\n    const filterNodeLists = (newNodes, type) => ({\n      ...newNodes,\n      [type]: filterNodesByType(type)\n    });\n    const filterNodesByType = type =>\n      nodes[type].filter(node => this.nodeMatchesSearch(node, searchValue));\n\n    return Object.keys(nodes).reduce(filterNodeLists, {});\n  }\n\n  /**\n   * Listen for keyboard events, and trigger relevant actions\n   * @param {number} keyCode The key event keycode\n   */\n  handleKeyDown(event) {\n    handleKeyEvent(event.keyCode, {\n      escape: this.updateSearchValue.bind(this, '')\n    });\n  }\n\n  /**\n   * Apply the new search filter text to the component state\n   * @param {string} searchValue The term being searched\n   */\n  updateSearchValue(searchValue) {\n    this.setState({\n      searchValue\n    });\n  }\n\n  render() {\n    const filteredNodes = this.filterNodes();\n    const formattedNodes = this.highlightMatch(filteredNodes);\n    const nodeIDs = getNodeIDs(filteredNodes);\n\n    return (\n      <React.Fragment>\n        <div\n          className=\"pipeline-node-list-search\"\n          onKeyDown={this.handleKeyDown}>\n          <SearchBar\n            onChange={this.updateSearchValue}\n            value={this.state.searchValue}\n            theme={this.props.theme}\n          />\n        </div>\n        <Scrollbars\n          className=\"pipeline-node-list-scrollbars\"\n          style={{ width: 'auto' }}\n          autoHide\n          hideTracksWhenNotNeeded>\n          <NodeListToggleAll nodeIDs={nodeIDs} />\n          <NodeListGroups nodes={formattedNodes} />\n        </Scrollbars>\n      </React.Fragment>\n    );\n  }\n}\n\nexport const mapStateToProps = state => ({\n  nodes: getGroupedNodes(state),\n  theme: state.theme\n});\n\nexport default connect(mapStateToProps)(NodeList);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <rect x=\"2\" y=\"5\" width=\"20\" height=\"2\" />\n    <rect x=\"2\" y=\"11\" width=\"20\" height=\"2\" />\n    <rect x=\"2\" y=\"17\" width=\"20\" height=\"2\" />\n  </svg>\n);\n","import React from 'react';\nimport classnames from 'classnames';\nimport Icon from '@quantumblack/kedro-ui/lib/components/icon';\nimport TagList from '../tag-list';\nimport NodeList from '../node-list';\nimport MenuIcon from '../icons/menu';\nimport './sidebar.css';\n\n/**\n * Hamburger menu button\n * @param {Function} props.onToggle Show menu on click\n * @param {Boolean} props.visible Whether nav is visible\n */\nexport const ShowMenuButton = ({ onToggle, visible }) => (\n  <button\n    aria-label=\"Show menu\"\n    className={classnames(\n      'pipeline-sidebar__show-menu pipeline-sidebar__icon-button',\n      {\n        'pipeline-sidebar__icon-button--visible': visible\n      }\n    )}\n    onClick={onToggle}>\n    <MenuIcon className=\"pipeline-icon\" />\n  </button>\n);\n\n/**\n * -shaped button to close the menu. Hidden when menu is closed.\n * @param {Function} props.onToggle Show menu on click\n * @param {string} props.theme Kedro-UI theme: 'light' or 'dark'\n * @param {Boolean} props.visible Whether nav is visible\n */\nexport const HideMenuButton = ({ onToggle, theme, visible }) => (\n  <button\n    aria-label=\"Hide menu\"\n    className={classnames(\n      'pipeline-sidebar__hide-menu pipeline-sidebar__icon-button',\n      {\n        'pipeline-sidebar__icon-button--visible': visible\n      }\n    )}\n    onClick={onToggle}>\n    <Icon type=\"close\" title=\"Close\" theme={theme} />\n  </button>\n);\n\n/**\n * Main app container. Handles showing/hiding the sidebar nav, and theme classes.\n * @param {Object} props onToggle, theme, and visible\n */\nconst Sidebar = props => (\n  <>\n    <ShowMenuButton onToggle={props.onToggle} visible={!props.visible} />\n    <nav\n      className={classnames('pipeline-sidebar', {\n        'pipeline-sidebar--visible': props.visible\n      })}>\n      <HideMenuButton {...props} />\n      <div className=\"pipeline-ui\">\n        <TagList />\n        <NodeList />\n      </div>\n    </nav>\n  </>\n);\n\nexport default Sidebar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport LabelIcon from '../icons/label';\nimport ThemeIcon from '../icons/theme';\nimport ExportIcon from '../icons/export';\n\nconst icons = {\n  label: LabelIcon,\n  theme: ThemeIcon,\n  export: ExportIcon\n};\n\n/**\n * Icon button component\n * @param {Function} onToggle Handle toggling theme between light/dark\n * @param {string} theme Kedro UI light/dark theme\n */\nconst IconButton = ({\n  ariaLabel,\n  ariaLive,\n  icon,\n  labelText,\n  onClick,\n  visible\n}) => {\n  const Icon = icons[icon];\n\n  return visible ? (\n    <li>\n      <button\n        aria-label={ariaLabel}\n        aria-live={ariaLive}\n        className=\"pipeline-icon-button\"\n        onClick={onClick}>\n        <span>{labelText}</span>\n        <Icon className=\"pipeline-icon\" />\n      </button>\n    </li>\n  ) : null;\n};\n\nIconButton.propTypes = {\n  ariaLabel: PropTypes.string,\n  ariaLive: PropTypes.string,\n  icon: PropTypes.string,\n  labelText: PropTypes.string,\n  onClick: PropTypes.func,\n  visible: PropTypes.bool\n};\n\nIconButton.defaultProps = {\n  ariaLabel: null,\n  ariaLive: null,\n  icon: 'label',\n  labelText: null,\n  onClick: null,\n  visible: true\n};\n\nexport default IconButton;\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 22 20\">\n    <path d=\"M22 0v20H7.3L0 10 7.3 0H22zm-6.2 5h-3.6L10 15h2l.3-1.8h3.4L16 15H18L15.8 5zm-1.5 1.7l1 4.7h-2.6l1-4.7h.6z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 20 20\">\n    <path d=\"M10 0a10 10 0 1 1 0 20 10 10 0 0 1 0-20zm0 2v16a8 8 0 1 0 0-16z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport default ({ className }) => (\n  <svg\n    className={className}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\">\n    <path d=\"M5 16v4h14v-4h2v4c0 1-.8 2-1.9 2H5a2 2 0 01-2-2v-4h2zm8-14v11l3.5-3.5L18 11l-6 6-6-6 1.5-1.5L11 13V2h2z\" />\n  </svg>\n);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Modal from '@quantumblack/kedro-ui/lib/components/modal';\nimport Button from '@quantumblack/kedro-ui/lib/components/button';\nimport { getGraphSize } from '../../selectors/layout';\nimport downloadSvg, { downloadPng } from 'svg-crowbar';\n\n/**\n * Handle onClick for the SVG/PNG download button\n * @param {Function} download SVG-crowbar function to download SVG or PNG\n * @param {string} format Must be 'svg' or 'png'\n * @param {number} param.width Graph width\n * @param {number} param.height Graph height\n * @return {Function} onClick handler\n */\nexport const exportGraph = (download, format, { width, height }) => {\n  const svg = document.querySelector('#pipeline-graph');\n  // Create clone of graph SVG to avoid breaking the original\n  const clone = svg.parentNode.appendChild(svg.cloneNode(true));\n\n  // Reset zoom/translate\n  clone.setAttribute('viewBox', `0 0 ${width} ${height}`);\n  clone.querySelector('#zoom-wrapper').removeAttribute('transform');\n\n  // Impose a maximum size on PNGs because otherwise they break when downloading\n  if (format === 'png') {\n    const maxWidth = 5000;\n    width = Math.min(width, maxWidth);\n    height = Math.min(height, maxWidth * (height / width));\n  }\n  clone.setAttribute('width', width);\n  clone.setAttribute('height', height);\n\n  const style = document.createElement('style');\n  if (format === 'svg') {\n    // Add webfont\n    style.innerHTML =\n      '@import url(https://fonts.googleapis.com/css?family=Titillium+Web:400);';\n  } else {\n    // Add websafe fallback font\n    style.innerHTML = `.kedro {\n      font-family: \"Trebuchet MS\", \"Lucida Grande\", \"Lucida Sans Unicode\", \"Lucida Sans\", Tahoma, sans-serif;\n      letter-spacing: -0.4px;\n    }`;\n  }\n  clone.prepend(style);\n\n  // Download SVG/PNG\n  download(clone, 'kedro-pipeline');\n\n  // Delete cloned SVG\n  svg.parentNode.removeChild(clone);\n};\n\n/**\n * Kedro-UI modal to allow users to choose between SVG/PNG export formats\n */\nconst ExportModal = ({ graphSize, theme, toggleModal, visible }) => (\n  <Modal\n    title=\"Export pipeline visualisation\"\n    onClose={() => toggleModal(false)}\n    theme={theme}\n    visible={visible}>\n    <div className=\"pipeline-icon-modal\">\n      <Button\n        theme={theme}\n        onClick={() => {\n          exportGraph(downloadPng, 'png', graphSize);\n          toggleModal(false);\n        }}>\n        Download PNG\n      </Button>\n      <Button\n        theme={theme}\n        onClick={() => {\n          exportGraph(downloadSvg, 'svg', graphSize);\n          toggleModal(false);\n        }}>\n        Download SVG\n      </Button>\n    </div>\n  </Modal>\n);\n\nexport const mapStateToProps = state => ({\n  graphSize: getGraphSize(state),\n  theme: state.theme\n});\n\nexport default connect(mapStateToProps)(ExportModal);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { toggleTextLabels, toggleTheme } from '../../actions';\nimport IconButton from './icon-button';\nimport ExportModal from './export-modal';\nimport './icon-toolbar.css';\n\n/**\n * Main contols for filtering the chart data\n * @param {Function} onToggleTheme Handle toggling theme between light/dark\n * @param {Function} onToggleTextLabels Handle toggling text labels on/off\n * @param {Boolean} textLabels Whether text labels are displayed\n * @param {string} theme Kedro UI light/dark theme\n */\nexport const IconToolbar = ({\n  onToggleTextLabels,\n  onToggleTheme,\n  textLabels,\n  theme,\n  visible\n}) => {\n  const [isModalVisible, toggleModal] = useState(false);\n\n  return (\n    <>\n      <ul className=\"pipeline-icon-toolbar kedro\">\n        <IconButton\n          ariaLive=\"polite\"\n          ariaLabel={`Change to ${theme === 'light' ? 'dark' : 'light'} theme`}\n          onClick={() => onToggleTheme(theme === 'light' ? 'dark' : 'light')}\n          icon=\"theme\"\n          labelText=\"Toggle theme\"\n          visible={visible.themeBtn}\n        />\n        <IconButton\n          ariaLive=\"polite\"\n          onClick={() => onToggleTextLabels(!textLabels)}\n          icon=\"label\"\n          labelText={`${textLabels ? 'Hide' : 'Show'} text labels`}\n          visible={visible.labelBtn}\n        />\n        <IconButton\n          ariaLabel=\"Export graph as SVG or PNG\"\n          onClick={() => toggleModal(true)}\n          icon=\"export\"\n          labelText=\"Export visualisation\"\n          visible={visible.exportBtn}\n        />\n      </ul>\n      {visible.exportBtn && (\n        <ExportModal visible={isModalVisible} toggleModal={toggleModal} />\n      )}\n    </>\n  );\n};\n\nexport const mapStateToProps = state => ({\n  textLabels: state.textLabels,\n  theme: state.theme,\n  visible: state.visible\n});\n\nexport const mapDispatchToProps = dispatch => ({\n  onToggleTextLabels: value => {\n    dispatch(toggleTextLabels(Boolean(value)));\n  },\n  onToggleTheme: value => {\n    dispatch(toggleTheme(value));\n  }\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(IconToolbar);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport FlowChart from '../flowchart';\nimport Sidebar from '../sidebar';\nimport IconToolbar from '../icon-toolbar';\nimport './wrapper.css';\n\n/**\n * Main app container. Handles showing/hiding the sidebar nav, and theme classes.\n */\nexport class Wrapper extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visibleNav: true\n    };\n  }\n\n  toggleNav() {\n    const visibleNav = !this.state.visibleNav;\n    this.setState({ visibleNav });\n  }\n\n  render() {\n    const { visibleNav } = this.state;\n    const { fontLoaded, theme } = this.props;\n\n    return (\n      <div\n        className={classnames('kedro-pipeline', {\n          'kui-theme--dark': theme === 'dark',\n          'kui-theme--light': theme === 'light'\n        })}>\n        <Sidebar\n          onToggle={this.toggleNav.bind(this)}\n          theme={theme}\n          visible={visibleNav}\n        />\n        {fontLoaded && <IconToolbar />}\n        <div className=\"pipeline-wrapper\">\n          {fontLoaded && <FlowChart visibleNav={visibleNav} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const mapStateToProps = state => ({\n  fontLoaded: state.fontLoaded,\n  theme: state.theme\n});\n\nexport default connect(mapStateToProps)(Wrapper);\n","import {\n  getNumberArray,\n  randomIndex,\n  randomNumber,\n  getRandom,\n  getRandomName,\n  unique\n} from './index';\n\n//--- Config variables ---//\n\nconst DATA_NODE_COUNT = 30;\nconst MAX_CONNECTED_NODES = 4;\nconst MAX_LAYER_COUNT = 20;\nconst MAX_NODE_TAG_COUNT = 5;\nconst MAX_TAG_COUNT = 20;\nconst PARAMETERS_FREQUENCY = 0.05;\nconst TASK_NODE_COUNT = 10;\n\n/**\n * Generate a random pipeline dataset\n */\nclass Pipeline {\n  constructor() {\n    this.CONNECTION_COUNT = randomNumber(MAX_CONNECTED_NODES);\n    this.LAYER_COUNT = randomNumber(MAX_LAYER_COUNT);\n    this.TAG_COUNT = randomNumber(MAX_TAG_COUNT);\n    this.nodes = this.getNodes();\n    this.tags = this.generateTags();\n  }\n\n  /**\n   * Generate a name for each node.\n   * Put 'parameters_' in front of 1 in 20.\n   * @param {number} paramFreq How often nodes should include 'parameters' in their name\n   */\n  getRandomNodeName(paramFreq) {\n    const name = getRandomName(randomNumber(10));\n    const params = Math.random() < paramFreq ? 'parameters_' : '';\n    return params + name;\n  }\n\n  /**\n   * Generate a list of nodes\n   * @param {number} count The number of nodes to generate\n   * @param {Function} getLayer A callback to create a random layer number\n   * @param {number} paramFreq How often nodes should include 'parameters' in their name\n   * @param {string} type\n   */\n  generateNodeList(count, getLayer, paramFreq, type) {\n    return getNumberArray(count)\n      .map(() => this.getRandomNodeName(paramFreq))\n      .filter(unique)\n      .map(id => {\n        const name = id.replace(/_/g, ' ');\n        return {\n          id: `${type}/${id}`,\n          name,\n          full_name: `${name} (${name})`,\n          type: id.includes('param') ? 'parameters' : type,\n          layer: getLayer()\n        };\n      });\n  }\n\n  /**\n   * Get lists of both data and task nodes\n   */\n  getNodes() {\n    return {\n      data: this.generateNodeList(\n        DATA_NODE_COUNT,\n        () => randomIndex(this.LAYER_COUNT + 1),\n        PARAMETERS_FREQUENCY,\n        'data'\n      ),\n      task: this.generateNodeList(\n        TASK_NODE_COUNT,\n        () => randomIndex(this.LAYER_COUNT) + 0.5,\n        0,\n        'task'\n      )\n    };\n  }\n\n  /**\n   * Generate a random list of tags\n   */\n  generateTags() {\n    return getNumberArray(this.TAG_COUNT)\n      .map(() => getRandomName(randomNumber(MAX_NODE_TAG_COUNT)))\n      .filter(unique);\n  }\n\n  /**\n   * Select a random number of tags from the list of tags\n   */\n  getRandomTags() {\n    return getNumberArray(randomNumber(this.TAG_COUNT))\n      .map(() => this.tags[randomIndex(this.tags.length)])\n      .filter(unique);\n  }\n\n  /**\n   * Get connected data nodes for each task node\n   * @param {Function} condition Determine order of precedence\n   */\n  getConnectedNodes(condition) {\n    return getNumberArray(this.CONNECTION_COUNT)\n      .map(() => getRandom(this.nodes.data.filter(condition)))\n      .filter(Boolean)\n      .map(d => d.id)\n      .filter(unique);\n  }\n\n  /**\n   * Get a complete JSON schema\n   */\n  getSchema() {\n    let nodes = this.nodes.task\n      .concat(this.nodes.data)\n      .map(node => ({ ...node, tags: this.getRandomTags() }));\n\n    const edges = [];\n    this.nodes.task.forEach(node => {\n      this.getConnectedNodes(d => d.layer < node.layer).forEach(target => {\n        edges.push({\n          source: node.id,\n          target\n        });\n      });\n      this.getConnectedNodes(d => d.layer > node.layer).forEach(source => {\n        edges.push({\n          source,\n          target: node.id\n        });\n      });\n    });\n\n    // Remove unconnected nodes\n    nodes = nodes.filter(\n      node =>\n        edges.findIndex(\n          edge => node.id === edge.source || node.id === edge.target\n        ) !== -1\n    );\n\n    const tags = nodes\n      .reduce((tags, node) => tags.concat(node.tags), [])\n      .filter(unique)\n      .map(tag => ({ name: tag, id: tag }));\n\n    return {\n      nodes,\n      edges,\n      tags\n    };\n  }\n\n  /**\n   * Generate the full pipeline datum\n   */\n  getDatum() {\n    return this.getSchema();\n  }\n}\n\nconst generateRandomPipeline = () => new Pipeline().getDatum();\n\nexport default generateRandomPipeline;\n","import { getInitialPipelineState } from '../store/initial-state';\n/**\n * Check whether data is in expected format\n * @param {Object} data - The parsed data input\n * @return {Boolean} True if valid for formatting\n */\nconst validateInput = data => {\n  const { isArray } = Array;\n  return (\n    data && isArray(data.edges) && isArray(data.nodes) && isArray(data.tags)\n  );\n};\n\n/**\n * Get unique, reproducible ID for each edge, based on its nodes\n * @param {Object} source - Name and type of the source node\n * @param {Object} target - Name and type of the target node\n */\nconst getEdgeID = (source, target) => [source, target].join('|');\n\n/**\n * Add a new node if it doesn't already exist\n * @param {string} name - Default node name\n * @param {string} type - 'data' or 'task'\n * @param {Array} tags - List of associated tags\n */\nconst addNode = state => node => {\n  const { id } = node;\n  if (state.node.name[id]) {\n    return;\n  }\n  state.node.ids.push(id);\n  state.node.name[id] = node.name;\n  state.node.fullName[id] = node.full_name || node.name;\n  state.node.type[id] = node.type;\n  state.node.isParam[id] = node.type === 'parameters';\n  state.node.tags[id] = node.tags || [];\n};\n\n/**\n * Create a new link between two nodes and add it to the edges array\n * @param {Object} source - Parent node\n * @param {Object} target - Child node\n */\nconst addEdge = state => ({ source, target }) => {\n  const id = getEdgeID(source, target);\n  if (state.edge.ids.includes(id)) {\n    return;\n  }\n  state.edge.ids.push(id);\n  state.edge.sources[id] = source;\n  state.edge.targets[id] = target;\n};\n\n/**\n * Add a new Tag if it doesn't already exist\n * @param {string} name - Default node name\n */\nconst addTag = state => tag => {\n  const { id } = tag;\n  state.tag.ids.push(id);\n  state.tag.name[id] = tag.name;\n};\n\n/**\n * Convert the pipeline data into a normalised state object\n * @param {Object} data Raw unformatted data input\n * @return {Object} Formatted, normalized state\n */\nconst formatData = data => {\n  const state = getInitialPipelineState();\n\n  if (validateInput(data)) {\n    if (data.schema_id) {\n      state.id = data.schema_id;\n    }\n    data.nodes.forEach(addNode(state));\n    data.edges.forEach(addEdge(state));\n    data.tags.forEach(addTag(state));\n  }\n\n  return state;\n};\n\nexport default formatData;\n","export default {\n  schema_id: '310750827599783',\n  tags: [\n    {\n      id: 'Nulla',\n      name: 'Nulla'\n    },\n    {\n      id: 'pulvinar',\n      name: 'pulvinar'\n    },\n    {\n      id: 'volutpat',\n      name: 'volutpat'\n    },\n    {\n      id: 'enim',\n      name: 'enim'\n    },\n    {\n      id: 'consectetur',\n      name: 'consectetur'\n    }\n  ],\n  edges: [\n    {\n      target: 'task/consectetur',\n      source: 'data/Lorem'\n    },\n    {\n      target: 'task/consectetur',\n      source: 'data/ipsum'\n    },\n    {\n      target: 'task/consectetur',\n      source: 'data/dolor'\n    },\n    {\n      target: 'task/consectetur',\n      source: 'data/sit'\n    },\n    {\n      target: 'task/consectetur',\n      source: 'data/amet'\n    },\n    {\n      target: 'data/Aliquam',\n      source: 'task/consectetur'\n    },\n    {\n      target: 'data/eu',\n      source: 'task/consectetur'\n    },\n    {\n      target: 'data/accumsan',\n      source: 'task/consectetur'\n    },\n    {\n      target: 'data/mauris',\n      source: 'task/consectetur'\n    }\n  ],\n  nodes: [\n    {\n      tags: ['Nulla', 'pulvinar', 'enim', 'consectetur', 'volutpat'],\n      id: 'task/consectetur',\n      type: 'task',\n      full_name: 'consectetur',\n      name: 'consectetur'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/mauris',\n      type: 'data',\n      full_name: 'mauris',\n      name: 'mauris'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/Lorem',\n      type: 'data',\n      full_name: 'Lorem',\n      name: 'Lorem'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/dolor',\n      type: 'data',\n      full_name: 'dolor',\n      name: 'dolor'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/eu',\n      type: 'data',\n      full_name: 'eu',\n      name: 'eu'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/accumsan',\n      type: 'data',\n      full_name: 'accumsan',\n      name: 'accumsan'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/ipsum',\n      type: 'data',\n      full_name: 'ipsum',\n      name: 'ipsum'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/sit',\n      type: 'data',\n      full_name: 'sit',\n      name: 'sit'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/Aliquam',\n      type: 'data',\n      full_name: 'Aliquam',\n      name: 'Aliquam'\n    },\n    {\n      tags: ['Nulla', 'pulvinar', 'volutpat', 'enim', 'consectetur'],\n      id: 'data/amet',\n      type: 'data',\n      full_name: 'amet',\n      name: 'amet'\n    }\n  ]\n};\n","export default {\n  schema_id: '09876543210987654321',\n  tags: [\n    {\n      id: 'small',\n      name: 'small'\n    },\n    {\n      id: 'huge',\n      name: 'huge'\n    }\n  ],\n  nodes: [\n    {\n      id: 'task/salmon',\n      name: 'salmon',\n      full_name: 'salmon',\n      tags: ['huge', 'small'],\n      type: 'task'\n    },\n    {\n      id: 'task/shark',\n      name: 'shark',\n      full_name: 'shark',\n      tags: [],\n      type: 'task'\n    },\n    {\n      id: 'task/trout',\n      name: 'trout',\n      full_name: 'trout',\n      tags: [],\n      type: 'task'\n    },\n    {\n      id: 'data/whale',\n      name: 'whale',\n      full_name: 'whale',\n      tags: [],\n      type: 'data'\n    },\n    {\n      id: 'data/dog',\n      name: 'dog',\n      full_name: 'dog',\n      tags: ['small', 'huge'],\n      type: 'data'\n    },\n    {\n      id: 'data/cat',\n      name: 'cat',\n      full_name: 'cat',\n      tags: ['small', 'huge'],\n      type: 'data'\n    },\n    {\n      id: 'data/parameters_rabbit',\n      name: 'parameters_rabbit',\n      full_name: 'parameters_rabbit',\n      tags: ['small', 'huge'],\n      type: 'parameters'\n    },\n    {\n      id: 'data/parameters',\n      name: 'parameters',\n      full_name: 'parameters',\n      tags: ['small', 'huge'],\n      type: 'parameters'\n    },\n    {\n      id: 'data/sheep',\n      name: 'sheep',\n      full_name: 'sheep',\n      tags: ['small', 'huge'],\n      type: 'data'\n    },\n    {\n      id: 'data/horse',\n      name: 'horse',\n      full_name: 'horse',\n      tags: ['small', 'huge'],\n      type: 'data'\n    },\n    {\n      id: 'data/weasel',\n      name: 'weasel',\n      full_name: 'weasel',\n      tags: [],\n      type: 'data'\n    },\n    {\n      id: 'data/elephant',\n      name: 'elephant',\n      full_name: 'elephant',\n      tags: [],\n      type: 'data'\n    },\n    {\n      id: 'data/bear',\n      name: 'bear',\n      full_name: 'bear',\n      tags: [],\n      type: 'data'\n    },\n    {\n      id: 'data/giraffe',\n      name: 'giraffe',\n      full_name: 'giraffe',\n      tags: [],\n      type: 'data'\n    },\n    {\n      id: 'data/pig',\n      name: 'pig',\n      full_name: 'pig',\n      tags: ['small', 'huge'],\n      type: 'data'\n    }\n  ],\n  edges: [\n    {\n      target: 'task/salmon',\n      source: 'data/cat'\n    },\n    {\n      target: 'task/salmon',\n      source: 'data/dog'\n    },\n    {\n      target: 'task/salmon',\n      source: 'data/parameters'\n    },\n    {\n      target: 'task/salmon',\n      source: 'data/parameters_rabbit'\n    },\n    {\n      target: 'data/pig',\n      source: 'task/salmon'\n    },\n    {\n      target: 'data/horse',\n      source: 'task/salmon'\n    },\n    {\n      target: 'data/sheep',\n      source: 'task/salmon'\n    },\n    {\n      target: 'task/shark',\n      source: 'data/cat'\n    },\n    {\n      target: 'task/shark',\n      source: 'data/weasel'\n    },\n    {\n      target: 'task/shark',\n      source: 'data/elephant'\n    },\n    {\n      target: 'task/shark',\n      source: 'data/bear'\n    },\n    {\n      target: 'data/sheep',\n      source: 'task/shark'\n    },\n    {\n      target: 'data/pig',\n      source: 'task/shark'\n    },\n    {\n      target: 'data/giraffe',\n      source: 'task/shark'\n    },\n    {\n      target: 'task/trout',\n      source: 'data/pig'\n    },\n    {\n      target: 'data/whale',\n      source: 'task/trout'\n    }\n  ]\n};\n","export default {\n  schema_id: '12345678901234567890',\n  edges: [\n    {\n      source: '33920f3a',\n      target: '06c33e94'\n    },\n    {\n      source: '06c33e94',\n      target: '105160a0'\n    },\n    {\n      source: '814ef273',\n      target: '0b7e1ac6'\n    },\n    {\n      source: '0b7e1ac6',\n      target: '389b5286'\n    },\n    {\n      source: '58450007',\n      target: '22ea294c'\n    },\n    {\n      source: '22ea294c',\n      target: 'bcb40508'\n    },\n    {\n      source: '105160a0',\n      target: 'f1a163c4'\n    },\n    {\n      source: 'f1a163c4',\n      target: 'e44a096d'\n    },\n    {\n      source: '389b5286',\n      target: 'b2f97396'\n    },\n    {\n      source: 'b2f97396',\n      target: '8c1dcc36'\n    },\n    {\n      source: 'bcb40508',\n      target: '27bb9dc7'\n    },\n    {\n      source: '27bb9dc7',\n      target: '13a964bf'\n    },\n    {\n      source: '842a3580',\n      target: 'fb5bd01d'\n    },\n    {\n      source: 'e44a096d',\n      target: 'fb5bd01d'\n    },\n    {\n      source: '8c1dcc36',\n      target: 'fb5bd01d'\n    },\n    {\n      source: '13a964bf',\n      target: 'fb5bd01d'\n    },\n    {\n      source: 'fb5bd01d',\n      target: '55bd1af4'\n    },\n    {\n      source: '842a3580',\n      target: 'd52422da'\n    },\n    {\n      source: 'e44a096d',\n      target: 'd52422da'\n    },\n    {\n      source: '8c1dcc36',\n      target: 'd52422da'\n    },\n    {\n      source: '13a964bf',\n      target: 'd52422da'\n    },\n    {\n      source: 'd52422da',\n      target: '442c2c34'\n    },\n    {\n      source: '181c2b7c',\n      target: 'dcbb9652'\n    },\n    {\n      source: '057ade39',\n      target: 'dcbb9652'\n    },\n    {\n      source: 'dcbb9652',\n      target: '7eb64be0'\n    },\n    {\n      source: '181c2b7c',\n      target: 'c4cff5d0'\n    },\n    {\n      source: '42e79d42',\n      target: 'c4cff5d0'\n    },\n    {\n      source: 'c4cff5d0',\n      target: '842a3580'\n    },\n    {\n      source: '7eb64be0',\n      target: '95cfc42d'\n    },\n    {\n      source: '1b3afcba',\n      target: '95cfc42d'\n    },\n    {\n      source: '55bd1af4',\n      target: '95cfc42d'\n    },\n    {\n      source: '95cfc42d',\n      target: '8770a38e'\n    },\n    {\n      source: '95cfc42d',\n      target: '1dafa5fb'\n    },\n    {\n      source: '442c2c34',\n      target: 'ccbee9c5'\n    },\n    {\n      source: '3a60b3a4',\n      target: 'ccbee9c5'\n    },\n    {\n      source: 'ccbee9c5',\n      target: 'fb4f64bd'\n    },\n    {\n      source: 'ccbee9c5',\n      target: 'f4f3a276'\n    },\n    {\n      source: '1dafa5fb',\n      target: '394244dd'\n    },\n    {\n      source: '55bd1af4',\n      target: '394244dd'\n    },\n    {\n      source: '394244dd',\n      target: '792a14f6'\n    },\n    {\n      source: 'f4f3a276',\n      target: '67257e84'\n    },\n    {\n      source: '442c2c34',\n      target: '67257e84'\n    },\n    {\n      source: '67257e84',\n      target: '9bd2dc3d'\n    },\n    {\n      source: '1dafa5fb',\n      target: 'f6f50e64'\n    },\n    {\n      source: 'dff067eb',\n      target: 'f6f50e64'\n    },\n    {\n      source: '55bd1af4',\n      target: 'f6f50e64'\n    },\n    {\n      source: 'f6f50e64',\n      target: '92f58611'\n    },\n    {\n      source: 'dff067eb',\n      target: 'e061482b'\n    },\n    {\n      source: 'f4f3a276',\n      target: 'e061482b'\n    },\n    {\n      source: '442c2c34',\n      target: 'e061482b'\n    },\n    {\n      source: 'e061482b',\n      target: 'b2a3a8e5'\n    },\n    {\n      source: '792a14f6',\n      target: '53b05b01'\n    },\n    {\n      source: '8770a38e',\n      target: '53b05b01'\n    },\n    {\n      source: 'fb4f64bd',\n      target: '6d8d326d'\n    },\n    {\n      source: '9bd2dc3d',\n      target: '6d8d326d'\n    },\n    {\n      source: 'dff067eb',\n      target: '45bda5fd'\n    },\n    {\n      source: '9aeb6881',\n      target: '45bda5fd'\n    },\n    {\n      source: '92f58611',\n      target: '45bda5fd'\n    },\n    {\n      source: '45bda5fd',\n      target: '90713d4f'\n    },\n    {\n      source: 'dff067eb',\n      target: '211c92c3'\n    },\n    {\n      source: '92f58611',\n      target: '211c92c3'\n    },\n    {\n      source: '211c92c3',\n      target: '4704ff18'\n    },\n    {\n      source: 'dff067eb',\n      target: 'c17b9614'\n    },\n    {\n      source: '4704ff18',\n      target: 'c17b9614'\n    },\n    {\n      source: 'c17b9614',\n      target: 'ccd3d45b'\n    },\n    {\n      source: '90713d4f',\n      target: '90461ea7'\n    },\n    {\n      source: 'ccd3d45b',\n      target: '90461ea7'\n    },\n    {\n      source: '9bd2dc3d',\n      target: '90461ea7'\n    },\n    {\n      source: '792a14f6',\n      target: '90461ea7'\n    },\n    {\n      source: '4704ff18',\n      target: '90461ea7'\n    },\n    {\n      source: '90461ea7',\n      target: '3e3b263a'\n    },\n    {\n      source: '90461ea7',\n      target: 'f3e15708'\n    },\n    {\n      source: '90461ea7',\n      target: '83ebce11'\n    },\n    {\n      source: '90461ea7',\n      target: 'a72d7024'\n    },\n    {\n      source: '90461ea7',\n      target: '8dbed427'\n    }\n  ],\n  nodes: [\n    {\n      full_name: 'load_raw_interaction_data',\n      id: '06c33e94',\n      name: 'Load Raw Interaction Data',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'task'\n    },\n    {\n      full_name: 'load_raw_country_data',\n      id: '0b7e1ac6',\n      name: 'Load Raw Country Data',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'task'\n    },\n    {\n      full_name: 'load_raw_shopper_spend_data',\n      id: '22ea294c',\n      name: 'Load Raw Shopper Spend Data',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'task'\n    },\n    {\n      full_name: 'preprocess_primary_interaction_data',\n      id: 'f1a163c4',\n      name: 'Preprocess Primary Interaction Data',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'task'\n    },\n    {\n      full_name: 'preprocess_primary_country_data',\n      id: 'b2f97396',\n      name: 'Preprocess Primary Country Data',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'task'\n    },\n    {\n      full_name: 'preprocess_primary_shopper_spend_data',\n      id: '27bb9dc7',\n      name: 'Preprocess Primary Shopper Spend Data',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'task'\n    },\n    {\n      full_name: 'create_shopper_spend_features',\n      id: 'fb5bd01d',\n      name: 'Create Shopper Spend Features',\n      tags: ['feature_engineering', 'data_engineering'],\n      type: 'task'\n    },\n    {\n      full_name: 'create_shopper_churn_features',\n      id: 'd52422da',\n      name: 'Create Shopper Churn Features',\n      tags: ['feature_engineering', 'data_engineering'],\n      type: 'task'\n    },\n    {\n      full_name: 'prepare_vendor_input',\n      id: 'dcbb9652',\n      name: 'Prepare Vendor Input',\n      tags: ['feature_engineering', 'data_engineering'],\n      type: 'task'\n    },\n    {\n      full_name: 'prepare_crm_input',\n      id: 'c4cff5d0',\n      name: 'Prepare CRM Input',\n      tags: ['feature_engineering', 'data_engineering'],\n      type: 'task'\n    },\n    {\n      full_name: 'predictive_sales_model',\n      id: '95cfc42d',\n      name: 'Predictive Sales Model',\n      tags: ['model_training', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'predictive_engagement_model',\n      id: 'ccbee9c5',\n      name: 'Predictive Engagement Model',\n      tags: ['model_training', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'sales_model_explainable_ai',\n      id: '394244dd',\n      name: 'Sales Model Explainable AI',\n      tags: ['model_explaination', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'engagement_model_explainable_ai',\n      id: '67257e84',\n      name: 'Engagement Model Explainable AI',\n      tags: ['model_explaination', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'perform_digital_analysis',\n      id: 'f6f50e64',\n      name: 'Perform Digital Analysis',\n      tags: ['model_training', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'engagement_recommendation_engine',\n      id: 'e061482b',\n      name: 'Engagement Recommendation Engine',\n      tags: ['model_training', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'sales_model_performance_monitoring',\n      id: '53b05b01',\n      name: 'Sales Model Performance Monitoring',\n      tags: ['model_performance_monitoring', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'engagement_model_performance_monitoring',\n      id: '6d8d326d',\n      name: 'Engagement Model Performance Monitoring',\n      tags: ['model_performance_monitoring', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'multi-channel_optimisation',\n      id: '45bda5fd',\n      name: 'Multi-Channel Optimisation',\n      tags: ['optimisation', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'content_optimisation',\n      id: '211c92c3',\n      name: 'Content Optimisation',\n      tags: ['optimisation', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'segment_journeys',\n      id: 'c17b9614',\n      name: 'Segment Journeys',\n      tags: ['optimisation', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'generate_dashboard_inputs',\n      id: '90461ea7',\n      name: 'Generate Dashboard Inputs',\n      tags: ['reporting', 'data_science'],\n      type: 'task'\n    },\n    {\n      full_name: 'interaction_raw',\n      id: '33920f3a',\n      name: 'Interaction Raw',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'interaction_primary',\n      id: '105160a0',\n      name: 'Interaction Primary',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'country_raw',\n      id: '814ef273',\n      name: 'Country Raw',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'country_primary',\n      id: '389b5286',\n      name: 'Country Primary',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'shopper_spend_raw',\n      id: '58450007',\n      name: 'Shopper Spend Raw',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'shopper_spend_primary',\n      id: 'bcb40508',\n      name: 'Shopper Spend Primary',\n      tags: ['data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'interaction_intermediate',\n      id: 'e44a096d',\n      name: 'Interaction Intermediate',\n      tags: ['feature_engineering', 'data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'country_intermediate',\n      id: '8c1dcc36',\n      name: 'Country Intermediate',\n      tags: ['feature_engineering', 'data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'shopper_spend_intermediate',\n      id: '13a964bf',\n      name: 'Shopper Spend Intermediate',\n      tags: ['feature_engineering', 'data_engineering', 'preprocessing'],\n      type: 'data'\n    },\n    {\n      full_name: 'crm_predictions',\n      id: '842a3580',\n      name: 'CRM Predictions',\n      tags: ['feature_engineering', 'data_engineering'],\n      type: 'data'\n    },\n    {\n      full_name: 'shopper_spend_features',\n      id: '55bd1af4',\n      name: 'Shopper Spend Features',\n      tags: [\n        'data_science',\n        'model_training',\n        'model_explaination',\n        'feature_engineering',\n        'data_engineering'\n      ],\n      type: 'data'\n    },\n    {\n      full_name: 'shopper_churn_features',\n      id: '442c2c34',\n      name: 'Shopper Churn Features',\n      tags: [\n        'data_science',\n        'model_training',\n        'model_explaination',\n        'feature_engineering',\n        'data_engineering'\n      ],\n      type: 'data'\n    },\n    {\n      full_name: 'vendor_master',\n      id: '181c2b7c',\n      name: 'Vendor Master',\n      tags: ['feature_engineering', 'data_engineering'],\n      type: 'data'\n    },\n    {\n      full_name: 'salesforce_crm',\n      id: '057ade39',\n      name: 'Salesforce CRM',\n      tags: ['feature_engineering', 'data_engineering'],\n      type: 'data'\n    },\n    {\n      full_name: 'vendor_predictions',\n      id: '7eb64be0',\n      name: 'Vendor Predictions',\n      tags: [\n        'feature_engineering',\n        'data_engineering',\n        'data_science',\n        'model_training'\n      ],\n      type: 'data'\n    },\n    {\n      full_name: 'salesforce_accounts',\n      id: '42e79d42',\n      name: 'Salesforce Accounts',\n      tags: ['feature_engineering', 'data_engineering'],\n      type: 'data'\n    },\n    {\n      full_name: 'params:_sales_model',\n      id: '1b3afcba',\n      name: 'params: Sales Model',\n      tags: ['data_science', 'model_training'],\n      type: 'parameters'\n    },\n    {\n      full_name: 'sales_validation_results',\n      id: '8770a38e',\n      name: 'Sales Validation Results',\n      tags: ['model_performance_monitoring', 'data_science', 'model_training'],\n      type: 'data'\n    },\n    {\n      full_name: 'sales_trained_model',\n      id: '1dafa5fb',\n      name: 'Sales Trained Model',\n      tags: ['model_explaination', 'data_science', 'model_training'],\n      type: 'data'\n    },\n    {\n      full_name: 'params:_engagement_model',\n      id: '3a60b3a4',\n      name: 'params: Engagement Model',\n      tags: ['data_science', 'model_training'],\n      type: 'parameters'\n    },\n    {\n      full_name: 'engagement_validation_results',\n      id: 'fb4f64bd',\n      name: 'Engagement Validation Results',\n      tags: ['model_performance_monitoring', 'data_science', 'model_training'],\n      type: 'data'\n    },\n    {\n      full_name: 'engagement_trained_model',\n      id: 'f4f3a276',\n      name: 'Engagement Trained Model',\n      tags: ['model_explaination', 'data_science', 'model_training'],\n      type: 'data'\n    },\n    {\n      full_name: 'sales_model_explanations',\n      id: '792a14f6',\n      name: 'Sales Model Explanations',\n      tags: [\n        'model_explaination',\n        'data_science',\n        'model_performance_monitoring',\n        'reporting'\n      ],\n      type: 'data'\n    },\n    {\n      full_name: 'engagement_model_explanations',\n      id: '9bd2dc3d',\n      name: 'Engagement Model Explanations',\n      tags: [\n        'model_explaination',\n        'data_science',\n        'model_performance_monitoring',\n        'reporting'\n      ],\n      type: 'data'\n    },\n    {\n      full_name: 'params:_optimisation',\n      id: 'dff067eb',\n      name: 'params: Optimisation',\n      tags: ['data_science', 'model_training', 'optimisation'],\n      type: 'parameters'\n    },\n    {\n      full_name: 'digital_analysis',\n      id: '92f58611',\n      name: 'Digital Analysis',\n      tags: ['data_science', 'model_training', 'optimisation'],\n      type: 'data'\n    },\n    {\n      full_name: 'engagement_recommendations',\n      id: 'b2a3a8e5',\n      name: 'Engagement Recommendations',\n      tags: ['data_science', 'model_training'],\n      type: 'data'\n    },\n    {\n      full_name: 'action_cost_table',\n      id: '9aeb6881',\n      name: 'Action Cost Table',\n      tags: ['data_science', 'optimisation'],\n      type: 'data'\n    },\n    {\n      full_name: 'multi-channel_resolutions',\n      id: '90713d4f',\n      name: 'Multi-Channel Resolutions',\n      tags: ['reporting', 'data_science', 'optimisation'],\n      type: 'data'\n    },\n    {\n      full_name: 'content_resolutions',\n      id: '4704ff18',\n      name: 'Content Resolutions',\n      tags: ['reporting', 'data_science', 'optimisation'],\n      type: 'data'\n    },\n    {\n      full_name: 'segment_journeys_allocations',\n      id: 'ccd3d45b',\n      name: 'Segment Journeys Allocations',\n      tags: ['reporting', 'data_science', 'optimisation'],\n      type: 'data'\n    },\n    {\n      full_name: 'upselling_readiness_dashboard_input',\n      id: '3e3b263a',\n      name: 'Upselling Readiness Dashboard Input',\n      tags: ['reporting', 'data_science'],\n      type: 'data'\n    },\n    {\n      full_name: 'lead_scoring_dashboard_input',\n      id: 'f3e15708',\n      name: 'Lead Scoring Dashboard Input',\n      tags: ['reporting', 'data_science'],\n      type: 'data'\n    },\n    {\n      full_name: 'lifetime_value_prediction_dashboard_input',\n      id: '83ebce11',\n      name: 'Lifetime Value Prediction Dashboard Input',\n      tags: ['reporting', 'data_science'],\n      type: 'data'\n    },\n    {\n      full_name: 'digital_sales_dashboard_input',\n      id: 'a72d7024',\n      name: 'Digital Sales Dashboard Input',\n      tags: ['reporting', 'data_science'],\n      type: 'data'\n    },\n    {\n      full_name: 'vendor_sales_dashboard_input',\n      id: '8dbed427',\n      name: 'Vendor Sales Dashboard Input',\n      tags: ['reporting', 'data_science'],\n      type: 'data'\n    }\n  ],\n  tags: [\n    {\n      id: 'model_performance_monitoring',\n      name: 'Model Performance Monitoring'\n    },\n    {\n      id: 'data_science',\n      name: 'Data Science'\n    },\n    {\n      id: 'reporting',\n      name: 'Reporting'\n    },\n    {\n      id: 'model_training',\n      name: 'Model Training'\n    },\n    {\n      id: 'preprocessing',\n      name: 'Preprocessing'\n    },\n    {\n      id: 'optimisation',\n      name: 'Optimisation'\n    },\n    {\n      id: 'model_explaination',\n      name: 'Model Explaination'\n    },\n    {\n      id: 'feature_engineering',\n      name: 'Feature Engineering'\n    },\n    {\n      id: 'data_engineering',\n      name: 'Data Engineering'\n    }\n  ]\n};\n","import { loadState } from './helpers';\nimport getRandomPipeline from '../utils/random-data';\nimport normalizeData from './normalize-data';\nimport loremIpsum from '../utils/data/lorem-ipsum.mock';\nimport animals from '../utils/data/animals.mock';\nimport demo from '../utils/data/demo.mock';\n\n/**\n * Determine where data should be loaded from (i.e. async from JSON,\n * or randomly-generated, or directly via props), then retrieve & format it.\n * @param {string|Array} data Either raw data itself, or a string\n * @return {Object} Normalized data\n */\nexport const getPipelineData = data => {\n  switch (data) {\n    case 'random':\n      // Use randomly-generated data\n      return getRandomPipeline();\n    case 'lorem':\n      // Use data from the 'lorem-ipsum' test dataset\n      return loremIpsum;\n    case 'animals':\n      // Use data from the 'animals' test dataset\n      return animals;\n    case 'demo':\n      // Use data from the 'demo' test dataset\n      return demo;\n    case 'json':\n      // Return empty state, as data will be loaded asynchronously later\n      return null;\n    case null:\n    case undefined:\n      throw new Error('No data was provided to App component via props');\n    default:\n      // Use data provided via component prop\n      return data;\n  }\n};\n\n/**\n * Generate a new default pipeline state instance\n * @return {Object} Initial state\n */\nexport const getInitialPipelineState = () => ({\n  id: null,\n  node: {\n    ids: [],\n    name: {},\n    fullName: {},\n    type: {},\n    isParam: {},\n    tags: {},\n    disabled: {},\n    clicked: null,\n    hovered: null\n  },\n  nodeType: {\n    ids: ['task', 'data', 'parameters'],\n    name: {\n      data: 'Datasets',\n      task: 'Nodes',\n      parameters: 'Parameters'\n    },\n    disabled: {}\n  },\n  edge: {\n    ids: [],\n    sources: {},\n    targets: {}\n  },\n  tag: {\n    ids: [],\n    name: {},\n    active: {},\n    enabled: {}\n  }\n});\n\n/**\n * Configure the redux store's initial state\n * @param {Object} props App component props\n * @return {Object} Initial state\n */\nconst getInitialState = (props = {}) => {\n  const pipelineData = normalizeData(getPipelineData(props.data));\n\n  // Load properties from localStorage if defined, else use defaults\n  const localStorageState = loadState();\n  const { textLabels = true, nodeTypeDisabled } = localStorageState;\n  const theme = props.theme || localStorageState.theme || 'dark';\n\n  const visible = Object.assign(\n    { exportBtn: true, labelBtn: true, themeBtn: true },\n    props.visible\n  );\n\n  if (nodeTypeDisabled) {\n    pipelineData.nodeType.disabled = nodeTypeDisabled;\n  }\n\n  return {\n    ...pipelineData,\n    chartSize: {},\n    fontLoaded: false,\n    textLabels,\n    visible,\n    theme\n  };\n};\n\nexport default getInitialState;\n","import { json } from 'd3-fetch';\nimport config from '../config';\n\n/**\n * Asynchronously load, parse and format data from json file using D3\n */\nconst loadJsonData = () => {\n  const { dataPath } = config();\n  return json(dataPath).catch(() => {\n    throw new Error(\n      `Unable to load pipeline data from ${dataPath}. If you're running Kedro-Viz as a standalone (e.g. for JavaScript development), please check that you have placed a data file at /public${dataPath}.`\n    );\n  });\n};\n\nexport default loadJsonData;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Provider } from 'react-redux';\nimport configureStore from '../../store';\nimport { resetData, updateFontLoaded } from '../../actions';\nimport checkFontLoaded from '../../actions/check-font-loaded';\nimport Wrapper from '../wrapper';\nimport getInitialState from '../../store/initial-state';\nimport loadData from '../../store/load-data';\nimport normalizeData from '../../store/normalize-data';\nimport '@quantumblack/kedro-ui/lib/styles/app.css';\nimport './app.css';\n\n/**\n * Main wrapper component. Intialises the Redux store\n */\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const initialState = getInitialState(props);\n    this.store = configureStore(initialState);\n  }\n\n  componentDidMount() {\n    this.asyncLoadJsonData();\n    this.checkWebFontLoading();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.data.schema_id !== this.props.data.schema_id) {\n      this.updatePipelineData();\n    }\n  }\n\n  /**\n   * Load data asynchronously from a JSON file then update the store\n   */\n  asyncLoadJsonData() {\n    if (this.props.data === 'json') {\n      loadData()\n        .then(normalizeData)\n        .then(data => {\n          this.store.dispatch(resetData(data));\n        });\n    }\n  }\n\n  /**\n   * Dispatch an action once the webfont has loaded\n   */\n  checkWebFontLoading() {\n    checkFontLoaded().then(() => {\n      this.store.dispatch(updateFontLoaded(true));\n    });\n  }\n\n  /**\n   * Dispatch an action to update the store with new pipeline data\n   */\n  updatePipelineData() {\n    const normalizedData = normalizeData(this.props.data);\n    this.store.dispatch(resetData(normalizedData));\n  }\n\n  render() {\n    return this.props.data ? (\n      <Provider store={this.store}>\n        <Wrapper />\n      </Provider>\n    ) : null;\n  }\n}\n\nApp.propTypes = {\n  data: PropTypes.oneOfType([\n    PropTypes.oneOf(['random', 'lorem', 'animals', 'demo', 'json']),\n    PropTypes.shape({\n      schema_id: PropTypes.string,\n      edges: PropTypes.array.isRequired,\n      nodes: PropTypes.array.isRequired,\n      tags: PropTypes.array\n    })\n  ]),\n  theme: PropTypes.oneOf(['dark', 'light']),\n  visible: PropTypes.shape({\n    labelBtn: PropTypes.bool,\n    themeBtn: PropTypes.bool\n  })\n};\n\nApp.defaultProps = {\n  /**\n   * Determines what pipeline data will be displayed on the chart.\n   * You can supply one of the following strings:\n     - 'random': Use randomly-generated data\n     - 'lorem': Use data from the 'lorem-ipsum' test dataset\n     - 'animals': Use data from the 'animals' test dataset\n     - 'demo': Use data from the 'demo' test dataset\n     - 'json': Load data from a local json file (in /public/api/nodes.json)\n   * Alternatively, you can supply an object containing lists of edges, nodes, tags.\n   * See /src/utils/data for examples of the expected data format.\n   */\n  data: null,\n  /**\n   * Specify the theme: Either 'light' or 'dark'.\n   * If set, this will override the localStorage value.\n   */\n  theme: null,\n  /**\n   * Show/hide the icon buttons with { labelBtn:false } and/or { themeBtn:false }\n   */\n  visible: {}\n};\n\nexport default App;\n","import { createStore } from 'redux';\nimport reducer from '../reducers';\nimport { saveState } from './helpers';\n\n/**\n * Configure initial state and create the Redux store\n * @param {Object} initialState Initial Redux state (from initial-state.js)\n * @return {Object} Redux store\n */\nexport default function configureStore(initialState) {\n  const store = createStore(reducer, initialState);\n\n  store.subscribe(() => {\n    const { textLabels, theme, nodeType } = store.getState();\n    saveState({ textLabels, theme, nodeTypeDisabled: nodeType.disabled });\n  });\n\n  return store;\n}\n","import React from 'react';\nimport KonamiCode from 'konami-code';\nimport './easter-egg.css';\nimport mp3 from './brodyquest.mp3';\nimport img from './easter-egg.png';\n\n/**\n * Konami code Easter Egg component\n */\nclass EasterEgg extends React.Component {\n  /**\n   * Create new APP\n   * @param {object} props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      play: false\n    };\n    if (typeof jest === 'undefined') {\n      console.info('Konami code is supported');\n    }\n\n    this.audio = new Audio(mp3);\n    this.audio.loop = true;\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  /**\n   * Called when mounted to view\n   */\n  componentDidMount() {\n    const konami = new KonamiCode();\n    konami.listen(this.toggleState.bind(this));\n    document.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  /**\n   * Triggered when component state updates\n   */\n  componentDidUpdate() {\n    this.toggleAudio();\n    this.toggleCSS();\n  }\n\n  /**\n   * Called just before component is removed from the view\n   */\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown);\n    document.body.classList.remove('easter-theme');\n  }\n\n  /**\n   * Handle keyboard interaction\n   * @param {Event} e\n   */\n  handleKeyDown(e) {\n    const escape = e.keyCode === 27;\n    if (escape && this.state.play) {\n      this.setState({\n        play: false\n      });\n    }\n  }\n\n  /**\n   * Toggle play state on/off\n   */\n  toggleState() {\n    this.setState({ play: !this.state.play });\n  }\n\n  /**\n   * Play/Pause the mp3\n   */\n  toggleAudio() {\n    if (this.state.play) {\n      this.audio.play();\n    } else {\n      this.audio.pause();\n    }\n  }\n\n  /**\n   * Play/Pause the mp3\n   */\n  toggleCSS() {\n    if (this.state.play) {\n      document.body.classList.add('easter-theme');\n    } else {\n      document.body.classList.remove('easter-theme');\n    }\n  }\n\n  /**\n   * Render the component\n   * @return {ReactElement}\n   */\n  render() {\n    const { play } = this.state;\n    if (!play) {\n      return null;\n    }\n    return (\n      <div className=\"easter-egg\">\n        <img src={img} alt=\"\" width=\"500\" height=\"480\" />\n      </div>\n    );\n  }\n}\n\nexport default EasterEgg;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'what-input';\nimport App from './components/app';\nimport EasterEgg from './components/easter-egg';\nimport config from './config';\nimport './styles/index.css';\n\nconst { dataSource } = config();\n\nReactDOM.render(\n  <>\n    <App data={dataSource} />\n    <EasterEgg />\n  </>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}